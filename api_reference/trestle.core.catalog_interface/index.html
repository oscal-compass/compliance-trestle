
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for compliance-trestle package.">
      
      
      
        <link rel="canonical" href="https://ibm.github.io/compliance-trestle/api_reference/trestle.core.catalog_interface/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.8">
    
    
      
        <title>catalog_interface - Compliance Trestle</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.815d1a91.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-XT3KGMHSY8"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-XT3KGMHSY8",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-XT3KGMHSY8",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#trestle.core.catalog_interface" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Compliance Trestle" class="md-header__button md-logo" aria-label="Compliance Trestle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Compliance Trestle
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              catalog_interface
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/IBM/compliance-trestle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    IBM/compliance-trestle
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Compliance Trestle" class="md-nav__button md-logo" aria-label="Compliance Trestle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Compliance Trestle
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/IBM/compliance-trestle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    IBM/compliance-trestle
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Trestle overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../python_trestle_setup/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/trestle_sample_workflow/" class="md-nav__link">
        Intro to trestle workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/continuous-compliance/continuous-compliance/" class="md-nav__link">
        Compliance posture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/ssp_profile_catalog_authoring/ssp_profile_catalog_authoring/" class="md-nav__link">
        SSP, Catalog, and Profile Authoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.transformer-construction/transformer-construction/" class="md-nav__link">
        Transformer construction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.ocp4-cis-profile-to-oscal-catalog/transformation/" class="md-nav__link">
        Task - ocp4-cis-profile-to-oscal-catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.ocp4-cis-profile-to-oscal-cd/transformation/" class="md-nav__link">
        Task - ocp4-cis-profile-to-oscal-cd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.tanium-result-to-oscal-ar/transformation/" class="md-nav__link">
        Task - tanium-result-to-oscal-ar
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Trestle command-line interface (CLI)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Trestle command-line interface (CLI)" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Trestle command-line interface (CLI)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        CLI for OSCAL documents
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trestle_author/" class="md-nav__link">
        Trestle CLI for Governance of Authored Documents
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trestle_author_jinja/" class="md-nav__link">
        CLI for jinja template processing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Contributing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Contributing" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs_code_of_conduct/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/mkdocs_contributing/" class="md-nav__link">
        Contributing overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/IBM/compliance-trestle/graphs/contributors" class="md-nav__link">
        Contributors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../maintainers/" class="md-nav__link">
        Maintainers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/website/" class="md-nav__link">
        Documentation website
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/trestle_oscal_object_model/" class="md-nav__link">
        Trestle's object model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/DCO/" class="md-nav__link">
        Developer Certificate of Originality
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/plugins/" class="md-nav__link">
        Trestle plugin mechanism
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../errors/" class="md-nav__link">
        Known limitations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../demonstrations-content/" class="md-nav__link">
        Demos
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Plugins
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Plugins" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Plugins
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/compliance-trestle-fedramp/" class="md-nav__link">
        FedRAMP validation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/third-party-result-schema-SCC/" class="md-nav__link">
        Integrating with IBM SCC
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2" type="checkbox" id="__nav_10_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2">
          trestle API reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="trestle API reference" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_2">
          <span class="md-nav__icon md-icon"></span>
          trestle API reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.cli/" class="md-nav__link">
        cli
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_2" type="checkbox" id="__nav_10_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_2">
          common
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="common" data-md-level="3">
        <label class="md-nav__title" for="__nav_10_2_2">
          <span class="md-nav__icon md-icon"></span>
          common
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.common_types/" class="md-nav__link">
        common_types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.const/" class="md-nav__link">
        const
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.err/" class="md-nav__link">
        err
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.file_utils/" class="md-nav__link">
        file_utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.list_utils/" class="md-nav__link">
        list_utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.load_validate/" class="md-nav__link">
        load_validate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.log/" class="md-nav__link">
        log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.model_utils/" class="md-nav__link">
        model_utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.str_utils/" class="md-nav__link">
        str_utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.trash/" class="md-nav__link">
        trash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.type_utils/" class="md-nav__link">
        type_utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_3" type="checkbox" id="__nav_10_2_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_3">
          core
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="core" data-md-level="3">
        <label class="md-nav__title" for="__nav_10_2_3">
          <span class="md-nav__icon md-icon"></span>
          core
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.all_validator/" class="md-nav__link">
        all_validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.base_model/" class="md-nav__link">
        base_model
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          catalog_interface
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        catalog_interface
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface" class="md-nav__link">
    catalog_interface
  </a>
  
    <nav class="md-nav" aria-label="catalog_interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.logger" class="md-nav__link">
    logger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface" class="md-nav__link">
    CatalogInterface
  </a>
  
    <nav class="md-nav" aria-label="CatalogInterface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.ControlHandle" class="md-nav__link">
    ControlHandle
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.delete_control" class="md-nav__link">
    delete_control()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.delete_withdrawn_controls" class="md-nav__link">
    delete_withdrawn_controls()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.find_part_with_condition" class="md-nav__link">
    find_part_with_condition()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.find_string_in_control" class="md-nav__link">
    find_string_in_control()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_all_controls_from_catalog" class="md-nav__link">
    get_all_controls_from_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_all_controls_from_dict" class="md-nav__link">
    get_all_controls_from_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_all_groups_from_catalog" class="md-nav__link">
    get_all_groups_from_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_catalog" class="md-nav__link">
    get_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_catalog_title" class="md-nav__link">
    get_catalog_title()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control" class="md-nav__link">
    get_control()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control_by_param_id" class="md-nav__link">
    get_control_by_param_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control_id_and_status" class="md-nav__link">
    get_control_id_and_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control_ids" class="md-nav__link">
    get_control_ids()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control_ids_from_catalog" class="md-nav__link">
    get_control_ids_from_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control_part_prose" class="md-nav__link">
    get_control_part_prose()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control_path" class="md-nav__link">
    get_control_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_count_of_controls_in_catalog" class="md-nav__link">
    get_count_of_controls_in_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_count_of_controls_in_dict" class="md-nav__link">
    get_count_of_controls_in_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_dependent_control_ids" class="md-nav__link">
    get_dependent_control_ids()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_full_control_path" class="md-nav__link">
    get_full_control_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_group_ids" class="md-nav__link">
    get_group_ids()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_group_info_by_control" class="md-nav__link">
    get_group_info_by_control()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_sections" class="md-nav__link">
    get_sections()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_sorted_controls_in_group" class="md-nav__link">
    get_sorted_controls_in_group()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_statement_label_if_exists" class="md-nav__link">
    get_statement_label_if_exists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_statement_part_id_map" class="md-nav__link">
    get_statement_part_id_map()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_statement_parts" class="md-nav__link">
    get_statement_parts()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.merge_catalog" class="md-nav__link">
    merge_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.merge_controls" class="md-nav__link">
    merge_controls()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.read_additional_content" class="md-nav__link">
    read_additional_content()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.read_catalog_from_markdown" class="md-nav__link">
    read_catalog_from_markdown()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.read_catalog_imp_reqs" class="md-nav__link">
    read_catalog_imp_reqs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.replace_control" class="md-nav__link">
    replace_control()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.update_catalog_controls" class="md-nav__link">
    update_catalog_controls()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_catalog" class="md-nav__link">
    write_catalog_as_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_component_markdown" class="md-nav__link">
    write_catalog_as_component_markdown()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_markdown" class="md-nav__link">
    write_catalog_as_markdown()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_profile_markdown" class="md-nav__link">
    write_catalog_as_profile_markdown()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_ssp_markdown" class="md-nav__link">
    write_catalog_as_ssp_markdown()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.catalog_validator/" class="md-nav__link">
        catalog_validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_3_5" type="checkbox" id="__nav_10_2_3_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_3_5">
          commands
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="commands" data-md-level="4">
        <label class="md-nav__title" for="__nav_10_2_3_5">
          <span class="md-nav__icon md-icon"></span>
          commands
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.add/" class="md-nav__link">
        add
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.assemble/" class="md-nav__link">
        assemble
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_3_5_3" type="checkbox" id="__nav_10_2_3_5_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_3_5_3">
          author
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="author" data-md-level="5">
        <label class="md-nav__title" for="__nav_10_2_3_5_3">
          <span class="md-nav__icon md-icon"></span>
          author
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.catalog/" class="md-nav__link">
        catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.command/" class="md-nav__link">
        command
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.common/" class="md-nav__link">
        common
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.component/" class="md-nav__link">
        component
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.consts/" class="md-nav__link">
        consts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.docs/" class="md-nav__link">
        docs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.folders/" class="md-nav__link">
        folders
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.headers/" class="md-nav__link">
        headers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.jinja/" class="md-nav__link">
        jinja
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.profile/" class="md-nav__link">
        profile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.ssp/" class="md-nav__link">
        ssp
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_3_5_3_12" type="checkbox" id="__nav_10_2_3_5_3_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_3_5_3_12">
          versioning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="versioning" data-md-level="6">
        <label class="md-nav__title" for="__nav_10_2_3_5_3_12">
          <span class="md-nav__icon md-icon"></span>
          versioning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.versioning.template_versioning/" class="md-nav__link">
        template_versioning
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.command_docs/" class="md-nav__link">
        command_docs
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_3_5_5" type="checkbox" id="__nav_10_2_3_5_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_3_5_5">
          common
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="common" data-md-level="5">
        <label class="md-nav__title" for="__nav_10_2_3_5_5">
          <span class="md-nav__icon md-icon"></span>
          common
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.common.cmd_utils/" class="md-nav__link">
        cmd_utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.common.return_codes/" class="md-nav__link">
        return_codes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.create/" class="md-nav__link">
        create
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.describe/" class="md-nav__link">
        describe
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.href/" class="md-nav__link">
        href
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.import_/" class="md-nav__link">
        import_
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.init/" class="md-nav__link">
        init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.merge/" class="md-nav__link">
        merge
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.partial_object_validate/" class="md-nav__link">
        partial_object_validate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.remove/" class="md-nav__link">
        remove
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.replicate/" class="md-nav__link">
        replicate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.split/" class="md-nav__link">
        split
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.task/" class="md-nav__link">
        task
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.validate/" class="md-nav__link">
        validate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.version/" class="md-nav__link">
        version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.control_context/" class="md-nav__link">
        control_context
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.control_interface/" class="md-nav__link">
        control_interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.control_reader/" class="md-nav__link">
        control_reader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.control_writer/" class="md-nav__link">
        control_writer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.docs_control_writer/" class="md-nav__link">
        docs_control_writer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.draw_io/" class="md-nav__link">
        draw_io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.duplicates_validator/" class="md-nav__link">
        duplicates_validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.generators/" class="md-nav__link">
        generators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.generic_oscal/" class="md-nav__link">
        generic_oscal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.jinja/" class="md-nav__link">
        jinja
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.links_validator/" class="md-nav__link">
        links_validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_3_17" type="checkbox" id="__nav_10_2_3_17" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_3_17">
          markdown
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="markdown" data-md-level="4">
        <label class="md-nav__title" for="__nav_10_2_3_17">
          <span class="md-nav__icon md-icon"></span>
          markdown
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.markdown_api/" class="md-nav__link">
        markdown_api
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.markdown_const/" class="md-nav__link">
        markdown_const
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.markdown_node/" class="md-nav__link">
        markdown_node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.markdown_processor/" class="md-nav__link">
        markdown_processor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.markdown_validator/" class="md-nav__link">
        markdown_validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.md_writer/" class="md-nav__link">
        md_writer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_3_18" type="checkbox" id="__nav_10_2_3_18" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_3_18">
          models
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="models" data-md-level="4">
        <label class="md-nav__title" for="__nav_10_2_3_18">
          <span class="md-nav__icon md-icon"></span>
          models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.actions/" class="md-nav__link">
        actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.elements/" class="md-nav__link">
        elements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.file_content_type/" class="md-nav__link">
        file_content_type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.interfaces/" class="md-nav__link">
        interfaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.plans/" class="md-nav__link">
        plans
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.object_factory/" class="md-nav__link">
        object_factory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.parser/" class="md-nav__link">
        parser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.pipeline/" class="md-nav__link">
        pipeline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.profile_resolver/" class="md-nav__link">
        profile_resolver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.refs_validator/" class="md-nav__link">
        refs_validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_3_24" type="checkbox" id="__nav_10_2_3_24" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_3_24">
          remote
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="remote" data-md-level="4">
        <label class="md-nav__title" for="__nav_10_2_3_24">
          <span class="md-nav__icon md-icon"></span>
          remote
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.remote.cache/" class="md-nav__link">
        cache
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.repository/" class="md-nav__link">
        repository
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_3_26" type="checkbox" id="__nav_10_2_3_26" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_3_26">
          resolver
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="resolver" data-md-level="4">
        <label class="md-nav__title" for="__nav_10_2_3_26">
          <span class="md-nav__icon md-icon"></span>
          resolver
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.resolver.merge/" class="md-nav__link">
        merge
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.resolver.modify/" class="md-nav__link">
        modify
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.resolver.prune/" class="md-nav__link">
        prune
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.ssp_io/" class="md-nav__link">
        ssp_io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.trestle_base_model/" class="md-nav__link">
        trestle_base_model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.validator/" class="md-nav__link">
        validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.validator_factory/" class="md-nav__link">
        validator_factory
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_4" type="checkbox" id="__nav_10_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_4">
          oscal
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="oscal" data-md-level="3">
        <label class="md-nav__title" for="__nav_10_2_4">
          <span class="md-nav__icon md-icon"></span>
          oscal
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.assessment_plan/" class="md-nav__link">
        assessment_plan
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.assessment_results/" class="md-nav__link">
        assessment_results
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.catalog/" class="md-nav__link">
        catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.common/" class="md-nav__link">
        common
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.component/" class="md-nav__link">
        component
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.poam/" class="md-nav__link">
        poam
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.profile/" class="md-nav__link">
        profile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.ssp/" class="md-nav__link">
        ssp
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_5" type="checkbox" id="__nav_10_2_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_5">
          tasks
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="tasks" data-md-level="3">
        <label class="md-nav__title" for="__nav_10_2_5">
          <span class="md-nav__icon md-icon"></span>
          tasks
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.base_task/" class="md-nav__link">
        base_task
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.csv_helper/" class="md-nav__link">
        csv_helper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.csv_to_oscal_cd/" class="md-nav__link">
        csv_to_oscal_cd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.ocp4_cis_profile_to_oscal_catalog/" class="md-nav__link">
        ocp4_cis_profile_to_oscal_catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.ocp4_cis_profile_to_oscal_cd/" class="md-nav__link">
        ocp4_cis_profile_to_oscal_cd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.oscal_profile_to_osco_profile/" class="md-nav__link">
        oscal_profile_to_osco_profile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.osco_result_to_oscal_ar/" class="md-nav__link">
        osco_result_to_oscal_ar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.tanium_result_to_oscal_ar/" class="md-nav__link">
        tanium_result_to_oscal_ar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.transform/" class="md-nav__link">
        transform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.xlsx_helper/" class="md-nav__link">
        xlsx_helper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.xlsx_to_oscal_cd/" class="md-nav__link">
        xlsx_to_oscal_cd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.xlsx_to_oscal_profile/" class="md-nav__link">
        xlsx_to_oscal_profile
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_6" type="checkbox" id="__nav_10_2_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_6">
          transforms
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="transforms" data-md-level="3">
        <label class="md-nav__title" for="__nav_10_2_6">
          <span class="md-nav__icon md-icon"></span>
          transforms
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2_6_1" type="checkbox" id="__nav_10_2_6_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_2_6_1">
          implementations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="implementations" data-md-level="4">
        <label class="md-nav__title" for="__nav_10_2_6_1">
          <span class="md-nav__icon md-icon"></span>
          implementations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.implementations.osco/" class="md-nav__link">
        osco
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.implementations.tanium/" class="md-nav__link">
        tanium
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.results/" class="md-nav__link">
        results
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.transformer_factory/" class="md-nav__link">
        transformer_factory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.transformer_helper/" class="md-nav__link">
        transformer_helper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.transformer_singleton/" class="md-nav__link">
        transformer_singleton
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface" class="md-nav__link">
    catalog_interface
  </a>
  
    <nav class="md-nav" aria-label="catalog_interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.logger" class="md-nav__link">
    logger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface" class="md-nav__link">
    CatalogInterface
  </a>
  
    <nav class="md-nav" aria-label="CatalogInterface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.ControlHandle" class="md-nav__link">
    ControlHandle
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.delete_control" class="md-nav__link">
    delete_control()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.delete_withdrawn_controls" class="md-nav__link">
    delete_withdrawn_controls()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.find_part_with_condition" class="md-nav__link">
    find_part_with_condition()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.find_string_in_control" class="md-nav__link">
    find_string_in_control()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_all_controls_from_catalog" class="md-nav__link">
    get_all_controls_from_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_all_controls_from_dict" class="md-nav__link">
    get_all_controls_from_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_all_groups_from_catalog" class="md-nav__link">
    get_all_groups_from_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_catalog" class="md-nav__link">
    get_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_catalog_title" class="md-nav__link">
    get_catalog_title()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control" class="md-nav__link">
    get_control()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control_by_param_id" class="md-nav__link">
    get_control_by_param_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control_id_and_status" class="md-nav__link">
    get_control_id_and_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control_ids" class="md-nav__link">
    get_control_ids()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control_ids_from_catalog" class="md-nav__link">
    get_control_ids_from_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control_part_prose" class="md-nav__link">
    get_control_part_prose()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_control_path" class="md-nav__link">
    get_control_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_count_of_controls_in_catalog" class="md-nav__link">
    get_count_of_controls_in_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_count_of_controls_in_dict" class="md-nav__link">
    get_count_of_controls_in_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_dependent_control_ids" class="md-nav__link">
    get_dependent_control_ids()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_full_control_path" class="md-nav__link">
    get_full_control_path()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_group_ids" class="md-nav__link">
    get_group_ids()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_group_info_by_control" class="md-nav__link">
    get_group_info_by_control()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_sections" class="md-nav__link">
    get_sections()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_sorted_controls_in_group" class="md-nav__link">
    get_sorted_controls_in_group()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_statement_label_if_exists" class="md-nav__link">
    get_statement_label_if_exists()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_statement_part_id_map" class="md-nav__link">
    get_statement_part_id_map()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.get_statement_parts" class="md-nav__link">
    get_statement_parts()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.merge_catalog" class="md-nav__link">
    merge_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.merge_controls" class="md-nav__link">
    merge_controls()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.read_additional_content" class="md-nav__link">
    read_additional_content()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.read_catalog_from_markdown" class="md-nav__link">
    read_catalog_from_markdown()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.read_catalog_imp_reqs" class="md-nav__link">
    read_catalog_imp_reqs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.replace_control" class="md-nav__link">
    replace_control()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.update_catalog_controls" class="md-nav__link">
    update_catalog_controls()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_catalog" class="md-nav__link">
    write_catalog_as_catalog()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_component_markdown" class="md-nav__link">
    write_catalog_as_component_markdown()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_markdown" class="md-nav__link">
    write_catalog_as_markdown()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_profile_markdown" class="md-nav__link">
    write_catalog_as_profile_markdown()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_ssp_markdown" class="md-nav__link">
    write_catalog_as_ssp_markdown()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>catalog_interface</h1>

<div class="doc doc-object doc-module">



<h2 id="trestle.core.catalog_interface" class="doc doc-heading">
        <code>trestle.core.catalog_interface</code>



<a href="#trestle.core.catalog_interface" class="headerlink" title="Permanent link"></a></h2>

    <div class="doc doc-contents first">

      <p>Provide interface to catalog allowing queries and operations at control level.</p>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="trestle.core.catalog_interface.logger" class="doc doc-heading">
<code class="highlight language-python"><span class="n">logger</span></code>


<a href="#trestle.core.catalog_interface.logger" class="headerlink" title="Permanent link"></a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>


<h3 id="trestle.core.catalog_interface-classes">Classes<a href="#trestle.core.catalog_interface-classes" class="headerlink" title="Permanent link"></a></h3>

  <div class="doc doc-object doc-class">



<h4 id="trestle.core.catalog_interface.CatalogInterface" class="doc doc-heading">
        <code>
CatalogInterface        </code>



<a href="#trestle.core.catalog_interface.CatalogInterface" class="headerlink" title="Permanent link"></a></h4>

    <div class="doc doc-contents ">

      <p>Interface to query and modify catalog contents.</p>
<p>The catalog is contained in two separate forms:  As an actual OSCAL catalog,
and as a separate dict providing direct lookup of a control by id.</p>
<p>The two representations should be converted as needed using provided routines:
dict -&gt; cat: update_catalog_controls
cat -&gt; dict: _create_control_dict</p>
<p>In normal use the dict is created by the CatalogInterface constructor,
changes are then made to controls in the dict,
then the catalog controls are updated by pulling from the dict back into the catalog.</p>
<p>This class does no direct file i/o.  i/o is performed via ControlIO.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">CatalogInterface</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Interface to query and modify catalog contents.</span>

<span class="sd">    The catalog is contained in two separate forms:  As an actual OSCAL catalog,</span>
<span class="sd">    and as a separate dict providing direct lookup of a control by id.</span>

<span class="sd">    The two representations should be converted as needed using provided routines:</span>
<span class="sd">    dict -&gt; cat: update_catalog_controls</span>
<span class="sd">    cat -&gt; dict: _create_control_dict</span>

<span class="sd">    In normal use the dict is created by the CatalogInterface constructor,</span>
<span class="sd">    changes are then made to controls in the dict,</span>
<span class="sd">    then the catalog controls are updated by pulling from the dict back into the catalog.</span>

<span class="sd">    This class does no direct file i/o.  i/o is performed via ControlIO.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">ControlHandle</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Convenience class for handling controls as members of a group.</span>

<span class="sd">        group_id: id of parent group or &#39;&#39; if not in a group</span>
<span class="sd">        group_title: title of the group</span>
<span class="sd">        group_class: class of the group</span>
<span class="sd">        path: path of parent groups leading to this control - without the final control_id, or [&#39;&#39;] if in cat list</span>
<span class="sd">        control: the control itself</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">group_id</span><span class="p">:</span> <span class="nb">str</span>
        <span class="n">group_title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="n">group_class</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="n">group_path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="n">control_path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">catalog</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Catalog</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Initialize the interface with the catalog.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span> <span class="o">=</span> <span class="n">catalog</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_param_control_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_generate_group_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_control_dict</span><span class="p">()</span> <span class="k">if</span> <span class="n">catalog</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loose_param_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">param</span><span class="o">.</span><span class="n">id</span><span class="p">:</span> <span class="n">param</span>
                                                              <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">catalog</span><span class="o">.</span><span class="n">params</span><span class="p">)}</span> <span class="k">if</span> <span class="n">catalog</span> <span class="k">else</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">_generate_group_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Generate sequential group ids.&quot;&quot;&quot;</span>
        <span class="n">group_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;trestle_group_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_generate_group_index</span><span class="si">:</span><span class="s1">04d</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_generate_group_index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Group titled &quot;</span><span class="si">{</span><span class="n">group</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s1">&quot; has no id and has been assigned id: </span><span class="si">{</span><span class="n">group_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">group_id</span>

    <span class="k">def</span> <span class="nf">_add_params_to_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># this does not need to recurse because it is called for each control in the catalog</span>
        <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">params</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_param_control_map</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;Duplicate param id </span><span class="si">{</span><span class="n">param</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> in control </span><span class="si">{</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> and </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_param_control_map</span><span class="p">[</span><span class="n">param</span><span class="o">.</span><span class="n">id</span><span class="p">]</span><span class="si">}</span><span class="s1">.&#39;</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_param_control_map</span><span class="p">[</span><span class="n">param</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="nf">_add_sub_controls</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">control_handle</span><span class="p">:</span> <span class="n">ControlHandle</span><span class="p">,</span> <span class="n">control_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ControlHandle</span><span class="p">],</span> <span class="n">path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all controls contained in this control and add it to the growing control dict.</span>

<span class="sd">        Add all its sub-controls to the dict recursively.</span>
<span class="sd">        The path does not change because only groups are in the path, and controls cannot contain groups.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">control_handle</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
            <span class="n">group_id</span> <span class="o">=</span> <span class="n">control_handle</span><span class="o">.</span><span class="n">group_id</span>
            <span class="n">group_title</span> <span class="o">=</span> <span class="n">control_handle</span><span class="o">.</span><span class="n">group_title</span>
            <span class="n">group_class</span> <span class="o">=</span> <span class="n">control_handle</span><span class="o">.</span><span class="n">group_class</span>
            <span class="n">group_path</span> <span class="o">=</span> <span class="n">control_handle</span><span class="o">.</span><span class="n">group_path</span>
            <span class="n">control_path</span> <span class="o">=</span> <span class="n">path</span><span class="p">[:]</span>
            <span class="n">control_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">control_handle</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">sub_control</span> <span class="ow">in</span> <span class="n">control_handle</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="n">control_handle</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">ControlHandle</span><span class="p">(</span>
                    <span class="n">group_id</span><span class="o">=</span><span class="n">group_id</span><span class="p">,</span>
                    <span class="n">group_title</span><span class="o">=</span><span class="n">group_title</span><span class="p">,</span>
                    <span class="n">group_class</span><span class="o">=</span><span class="n">group_class</span><span class="p">,</span>
                    <span class="n">group_path</span><span class="o">=</span><span class="n">group_path</span><span class="p">,</span>
                    <span class="n">control_path</span><span class="o">=</span><span class="n">control_path</span><span class="p">,</span>
                    <span class="n">control</span><span class="o">=</span><span class="n">sub_control</span>
                <span class="p">)</span>
                <span class="n">control_dict</span><span class="p">[</span><span class="n">sub_control</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">control_handle</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_add_sub_controls</span><span class="p">(</span><span class="n">control_handle</span><span class="p">,</span> <span class="n">control_dict</span><span class="p">,</span> <span class="n">control_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_group_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">,</span> <span class="n">control_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ControlHandle</span><span class="p">],</span> <span class="n">path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Add all controls in the group recursively, including sub groups and sub controls.&quot;&quot;&quot;</span>
        <span class="n">group</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_group_id</span><span class="p">(</span><span class="n">group</span><span class="p">)</span> <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">group</span><span class="o">.</span><span class="n">id</span>
        <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">controls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">group_path</span> <span class="o">=</span> <span class="n">path</span><span class="p">[:]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">group_path</span> <span class="ow">or</span> <span class="n">group_path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">group</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                <span class="n">group_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">group</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="n">control_handle</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">ControlHandle</span><span class="p">(</span>
                    <span class="n">group_id</span><span class="o">=</span><span class="n">group</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="n">group_title</span><span class="o">=</span><span class="n">group</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
                    <span class="n">group_class</span><span class="o">=</span><span class="n">group</span><span class="o">.</span><span class="n">class_</span><span class="p">,</span>
                    <span class="n">control</span><span class="o">=</span><span class="n">control</span><span class="p">,</span>
                    <span class="n">group_path</span><span class="o">=</span><span class="n">group_path</span><span class="p">,</span>
                    <span class="n">control_path</span><span class="o">=</span><span class="n">group_path</span>
                <span class="p">)</span>
                <span class="n">control_dict</span><span class="p">[</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">control_handle</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_add_sub_controls</span><span class="p">(</span><span class="n">control_handle</span><span class="p">,</span> <span class="n">control_dict</span><span class="p">,</span> <span class="n">group_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">groups</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">group_path</span> <span class="o">=</span> <span class="n">path</span><span class="p">[:]</span>
            <span class="n">group_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">sub_group</span> <span class="ow">in</span> <span class="n">group</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
                <span class="n">new_path</span> <span class="o">=</span> <span class="n">group_path</span><span class="p">[:]</span>
                <span class="n">sub_group</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_group_id</span><span class="p">(</span><span class="n">sub_group</span><span class="p">)</span> <span class="k">if</span> <span class="n">sub_group</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">sub_group</span><span class="o">.</span><span class="n">id</span>
                <span class="n">new_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sub_group</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_add_group_controls</span><span class="p">(</span><span class="n">sub_group</span><span class="p">,</span> <span class="n">control_dict</span><span class="p">,</span> <span class="n">new_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_create_control_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ControlHandle</span><span class="p">]:</span>
        <span class="n">control_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">ControlHandle</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># add controls by group</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_add_group_controls</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">control_dict</span><span class="p">,</span> <span class="p">[])</span>
        <span class="c1"># now add controls not in a group, if any</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">controls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">group_path</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="n">control_handle</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">ControlHandle</span><span class="p">(</span>
                    <span class="n">group_id</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                    <span class="n">group_title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                    <span class="n">group_class</span><span class="o">=</span><span class="n">const</span><span class="o">.</span><span class="n">MODEL_TYPE_CATALOG</span><span class="p">,</span>
                    <span class="n">control</span><span class="o">=</span><span class="n">control</span><span class="p">,</span>
                    <span class="n">group_path</span><span class="o">=</span><span class="n">group_path</span><span class="p">,</span>
                    <span class="n">control_path</span><span class="o">=</span><span class="n">group_path</span>
                <span class="p">)</span>
                <span class="n">control_dict</span><span class="p">[</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">control_handle</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_add_sub_controls</span><span class="p">(</span><span class="n">control_handle</span><span class="p">,</span> <span class="n">control_dict</span><span class="p">,</span> <span class="n">group_path</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">handle</span> <span class="ow">in</span> <span class="n">control_dict</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_params_to_map</span><span class="p">(</span><span class="n">handle</span><span class="o">.</span><span class="n">control</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">control_dict</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_all_controls_in_list</span><span class="p">(</span><span class="n">controls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">],</span> <span class="n">recurse</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get all controls in a list with optional recursion for sub controls.&quot;&quot;&quot;</span>
        <span class="n">new_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
            <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">recurse</span> <span class="ow">and</span> <span class="n">control</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="n">new_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_all_controls_in_list</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">controls</span><span class="p">,</span> <span class="n">recurse</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">new_list</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_all_controls_in_group</span><span class="p">(</span><span class="n">group</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">,</span> <span class="n">recurse</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a list of all controls in this group.</span>

<span class="sd">        recurse specifies to recurse within controls, but groups are always recursed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">controls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
            <span class="n">controls</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_all_controls_in_list</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">controls</span><span class="p">,</span> <span class="n">recurse</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">sub_group</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">groups</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">sub_group</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="n">controls</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_all_controls_in_group</span><span class="p">(</span><span class="n">sub_group</span><span class="p">,</span> <span class="n">recurse</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">controls</span>

    <span class="k">def</span> <span class="nf">get_sorted_controls_in_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get the list of controls in a group sorted by the control sort-id.&quot;&quot;&quot;</span>
        <span class="n">controls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_dict</span><span class="p">():</span>
            <span class="n">grp_id</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_group_info_by_control</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">grp_id</span> <span class="o">==</span> <span class="n">group_id</span><span class="p">:</span>
                <span class="n">controls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">control</span><span class="p">:</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_sort_id</span><span class="p">(</span><span class="n">control</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_dependent_control_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Find all child ids of this control from the dict with recursion.&quot;&quot;&quot;</span>
        <span class="n">children</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">control_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">control</span><span class="p">:</span>
            <span class="n">new_controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_controls_in_list</span><span class="p">(</span><span class="n">as_list</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">controls</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>
            <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">con</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">con</span> <span class="ow">in</span> <span class="n">new_controls</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">children</span>

    <span class="k">def</span> <span class="nf">get_control_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get all control ids from the control dict.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get control from the control dict with this id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">control_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control_id</span><span class="p">]</span><span class="o">.</span><span class="n">control</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_control_ids_from_catalog</span><span class="p">(</span><span class="n">catalog</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Catalog</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all control ids from a catalog.</span>

<span class="sd">        This is intended to provide a quick list of all controls in a catalog without the expense of building the</span>
<span class="sd">        control dict.  So, if repeated queries are made into a catalog, it is worth instantiating a CatalogInterface</span>
<span class="sd">        and associated control dict.  Otherwise just use this to get a list of all controls.</span>

<span class="sd">        This function is needed within the CatalogInterface in order to determine if new controls have been added</span>
<span class="sd">        to the dict and need to be inserted in the actual catalog during update.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">controls</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_all_controls_in_list</span><span class="p">(</span><span class="n">as_list</span><span class="p">(</span><span class="n">catalog</span><span class="o">.</span><span class="n">controls</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">id_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">control</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">catalog</span><span class="o">.</span><span class="n">groups</span><span class="p">):</span>
            <span class="n">controls</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_all_controls_in_group</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="n">id_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">control</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">controls</span><span class="p">)])</span>
        <span class="k">return</span> <span class="n">id_list</span>

    <span class="k">def</span> <span class="nf">get_control_by_param_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get control from catalog that has this param id using the dict.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">param_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_param_control_map</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_param_control_map</span><span class="p">[</span><span class="n">param_id</span><span class="p">])</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">get_control_id_and_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the control id and status using the control name.</span>

<span class="sd">        Returns empty string if status not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_dict</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_label</span><span class="p">(</span><span class="n">control</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">control_name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">status</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_prop</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">status</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">get_catalog_title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the title of the catalog.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">title</span>

    <span class="k">def</span> <span class="nf">get_statement_part_id_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_as_key</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Create mapping of label to part_id for top level parts in statement of all controls.&quot;&quot;&quot;</span>
        <span class="n">id_map</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_catalog</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
            <span class="n">statement_part</span> <span class="o">=</span> <span class="n">get_item_from_list</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">STATEMENT</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">statement_part</span><span class="p">:</span>
                <span class="n">id_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">sub_part</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">statement_part</span><span class="o">.</span><span class="n">parts</span><span class="p">):</span>
                    <span class="n">label</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_label</span><span class="p">(</span><span class="n">sub_part</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">label_as_key</span><span class="p">:</span>
                        <span class="n">id_dict</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub_part</span><span class="o">.</span><span class="n">id</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">id_dict</span><span class="p">[</span><span class="n">sub_part</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">label</span>
                <span class="k">if</span> <span class="n">id_dict</span><span class="p">:</span>
                    <span class="n">id_map</span><span class="p">[</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">id_dict</span>
        <span class="k">return</span> <span class="n">id_map</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_statement_sub_parts</span><span class="p">(</span><span class="n">part</span><span class="p">:</span> <span class="n">common</span><span class="o">.</span><span class="n">Part</span><span class="p">,</span> <span class="n">indent</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># this may be &#39;&#39; if no label</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_label</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
        <span class="n">prose</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">prose</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">part</span><span class="o">.</span><span class="n">prose</span>
        <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;indent&#39;</span><span class="p">:</span> <span class="n">indent</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">label</span><span class="p">,</span> <span class="s1">&#39;prose&#39;</span><span class="p">:</span> <span class="n">prose</span><span class="p">})</span>
        <span class="k">for</span> <span class="n">prt</span> <span class="ow">in</span> <span class="n">as_filtered_list</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;item&#39;</span><span class="p">):</span>
            <span class="n">items</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_statement_sub_parts</span><span class="p">(</span><span class="n">prt</span><span class="p">,</span> <span class="n">indent</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">items</span>

    <span class="k">def</span> <span class="nf">get_statement_parts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Get list of statement parts as dicts with indentation, label and prose.&quot;&quot;&quot;</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">control_id</span><span class="p">)</span>

        <span class="c1"># control may have no statement or parts</span>
        <span class="c1"># but if statement present it is first part</span>
        <span class="k">if</span> <span class="n">control</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No control found for id </span><span class="si">{</span><span class="n">control_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
            <span class="n">part</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;statement&#39;</span><span class="p">:</span>
                <span class="n">items</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_statement_sub_parts</span><span class="p">(</span><span class="n">part</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Control </span><span class="si">{</span><span class="n">control_id</span><span class="si">}</span><span class="s1"> has parts but first part name is </span><span class="si">{</span><span class="n">part</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> - not statement&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">items</span>

    <span class="k">def</span> <span class="nf">get_control_part_prose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">part_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the prose for a named part in the control.</span>

<span class="sd">        Args:</span>
<span class="sd">            control_id: id of the control</span>
<span class="sd">            part_name: name of the part</span>

<span class="sd">        Returns:</span>
<span class="sd">            Single string concatenating prose from all parts and sub-parts in control with that name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">control_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_part_prose</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">part_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_all_controls_from_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recurse</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Yield all controls from the actual catalog by group including optional sub controls.</span>

<span class="sd">        Args:</span>
<span class="sd">            recurse: Whether to recurse within controls, but groups are always recursed</span>

<span class="sd">        Returns:</span>
<span class="sd">            iterator of the controls in the catalog</span>

<span class="sd">        Notes:</span>
<span class="sd">            This follows the actual structure of the catalog and groups</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
                <span class="n">controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_controls_in_group</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">recurse</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">control</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
            <span class="n">cat_controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_controls_in_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">controls</span><span class="p">,</span> <span class="n">recurse</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">cat_controls</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">control</span>

    <span class="k">def</span> <span class="nf">get_all_controls_from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Yield individual controls from the dict.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">handle</span><span class="o">.</span><span class="n">control</span> <span class="k">for</span> <span class="n">handle</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>

    <span class="k">def</span> <span class="nf">get_count_of_controls_in_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Find number of controls in the dict.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_count_of_controls_in_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recurse</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get count of controls from the actual catalog including optional sub controls.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_catalog</span><span class="p">(</span><span class="n">recurse</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">get_group_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get all the group id&#39;s as a list of sorted strings.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">id</span><span class="p">,</span> <span class="nb">list</span><span class="p">({</span><span class="n">control</span><span class="o">.</span><span class="n">group_id</span> <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()})))</span>

    <span class="k">def</span> <span class="nf">get_all_groups_from_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve all groups in the catalog sorted by group_id.</span>

<span class="sd">        This ignores controls that are direct children of the catalog.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">groups</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">my_group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_groups_from_group</span><span class="p">(</span><span class="n">my_group</span><span class="p">):</span>
                    <span class="n">groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">group</span><span class="p">:</span> <span class="n">group</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_statement_label_if_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                      <span class="n">statement_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">Part</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Get statement label if available.&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">does_part_exists</span><span class="p">(</span><span class="n">part</span><span class="p">:</span> <span class="n">common</span><span class="o">.</span><span class="n">Part</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="n">does_match</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">{</span><span class="n">const</span><span class="o">.</span><span class="n">STATEMENT</span><span class="p">,</span> <span class="s1">&#39;item&#39;</span><span class="p">}</span> <span class="ow">and</span> <span class="n">part</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">statement_id</span><span class="p">:</span>
                <span class="n">does_match</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="n">does_match</span>

        <span class="n">control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">control_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">control</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="kc">None</span>
        <span class="n">label</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">found_part</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">):</span>
                <span class="c1"># Performance OSCAL assumption, ids are nested so recurse only if prefix</span>
                <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">id</span> <span class="ow">and</span> <span class="n">statement_id</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                    <span class="n">part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_part_with_condition</span><span class="p">(</span><span class="n">part</span><span class="p">,</span> <span class="n">does_part_exists</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">part</span><span class="p">:</span>
                        <span class="n">label</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_label</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
                        <span class="n">found_part</span> <span class="o">=</span> <span class="n">part</span>
                        <span class="k">break</span>

        <span class="k">return</span> <span class="n">label</span><span class="p">,</span> <span class="n">found_part</span>

    <span class="k">def</span> <span class="nf">find_part_with_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">part</span><span class="p">:</span> <span class="n">common</span><span class="o">.</span><span class="n">Part</span><span class="p">,</span> <span class="n">condition</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">Part</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Traverse part and find subpart that satisfies given condition.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">condition</span><span class="p">(</span><span class="n">part</span><span class="p">):</span>
            <span class="c1"># Part that satisfies the condition is found.</span>
            <span class="k">return</span> <span class="n">part</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">subpart</span> <span class="ow">in</span> <span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                    <span class="n">found_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_part_with_condition</span><span class="p">(</span><span class="n">subpart</span><span class="p">,</span> <span class="n">condition</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">found_part</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">found_part</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">delete_withdrawn_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Delete all withdrawn controls from the catalog.&quot;&quot;&quot;</span>
        <span class="n">delete_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_dict</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">is_withdrawn</span><span class="p">(</span><span class="n">control</span><span class="p">):</span>
                <span class="n">delete_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">id_</span> <span class="ow">in</span> <span class="n">delete_list</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">delete_control</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_groups_from_group</span><span class="p">(</span><span class="n">group</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">]:</span>
        <span class="k">yield</span> <span class="n">group</span>
        <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">new_group</span> <span class="ow">in</span> <span class="n">group</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_groups_from_group</span><span class="p">(</span><span class="n">new_group</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">get_group_info_by_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get the group_id, title, class for this control from the dict.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control_id</span><span class="p">]</span><span class="o">.</span><span class="n">group_id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control_id</span><span class="p">]</span><span class="o">.</span><span class="n">group_title</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control_id</span><span class="p">]</span><span class="o">.</span><span class="n">group_class</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_control_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return the path into the markdown directory for this control based only on the groups.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control_id</span><span class="p">]</span><span class="o">.</span><span class="n">group_path</span>

    <span class="k">def</span> <span class="nf">get_full_control_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return the path to the control including groups and sub-controls.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control_id</span><span class="p">]</span><span class="o">.</span><span class="n">control_path</span>

    <span class="k">def</span> <span class="nf">replace_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Replace the control in the control_dict.</span>

<span class="sd">        This only replaces the parent control and not its children.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">]</span><span class="o">.</span><span class="n">control</span> <span class="o">=</span> <span class="n">control</span>

    <span class="k">def</span> <span class="nf">delete_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete the control from the control_dict based on id.</span>

<span class="sd">        Delete all its dependent children also.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">control_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">control</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">sub_control_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dependent_control_ids</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">sub_control_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">control_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">cat</span><span class="o">.</span><span class="n">Catalog</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Safe method to get catalog after forced update from catalog dict.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">update</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_catalog_controls</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span>

    <span class="k">def</span> <span class="nf">_update_all_controls_in_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">controls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a list of controls, create fresh list pulled from the control dict.</span>

<span class="sd">        Args:</span>
<span class="sd">            controls: a list of controls in the original catalog</span>

<span class="sd">        Returns:</span>
<span class="sd">            The new list of updated controls, possibly with some missing if they have been removed from the dict.</span>
<span class="sd">            Children are inserted as needed into parent controls.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
            <span class="c1"># first update the control itself by getting it from the dict</span>
            <span class="n">new_control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">new_control</span><span class="p">:</span>
                <span class="c1"># this overrides any sub controls in the control itself</span>
                <span class="c1"># any added sub-controls should add to the skipped list</span>
                <span class="n">new_control</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_all_controls_in_list</span><span class="p">(</span><span class="n">as_list</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">controls</span><span class="p">))</span>
                <span class="n">new_control</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">new_control</span><span class="o">.</span><span class="n">controls</span><span class="p">)</span>
                <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_control</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_list</span>

    <span class="k">def</span> <span class="nf">_update_all_controls_in_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Given a group of controls, create fresh version pulled from the control dict.&quot;&quot;&quot;</span>
        <span class="n">group</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_all_controls_in_list</span><span class="p">(</span><span class="n">as_list</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">controls</span><span class="p">))</span>
        <span class="n">group</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">controls</span><span class="p">)</span>
        <span class="n">new_groups</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">sub_group</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">groups</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_all_controls_in_group</span><span class="p">(</span><span class="n">sub_group</span><span class="p">)</span>
            <span class="n">new_groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sub_group</span><span class="p">)</span>
        <span class="n">group</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">new_groups</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_insert_control_in_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_handle</span><span class="p">:</span> <span class="n">ControlHandle</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Insert the control into the catalog based on its path.&quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">control_handle</span><span class="o">.</span><span class="n">group_path</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span>
        <span class="k">if</span> <span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">group_id</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
                <span class="n">found_group</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">groups</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">group_id</span><span class="p">:</span>
                        <span class="n">found_group</span> <span class="o">=</span> <span class="n">group</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="n">found_group</span><span class="p">:</span>
                    <span class="n">node</span> <span class="o">=</span> <span class="n">found_group</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No controls found in catalog for group </span><span class="si">{</span><span class="n">group</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">node</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">control_handle</span><span class="o">.</span><span class="n">group_title</span>
            <span class="n">node</span><span class="o">.</span><span class="n">class_</span> <span class="o">=</span> <span class="n">control_handle</span><span class="o">.</span><span class="n">group_class</span>
        <span class="n">node</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">delete_item_from_list</span><span class="p">(</span>
            <span class="n">as_list</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">controls</span><span class="p">),</span> <span class="n">control_handle</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">control</span><span class="p">:</span> <span class="n">control</span><span class="o">.</span><span class="n">id</span>
        <span class="p">)</span>
        <span class="n">node</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">control_handle</span><span class="o">.</span><span class="n">control</span><span class="p">)</span>
        <span class="n">node</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">controls</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">control</span><span class="p">:</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_sort_id</span><span class="p">(</span><span class="n">control</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">update_catalog_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the actual catalog by pulling fresh controls from the dict.</span>

<span class="sd">        During assembly, controls may be added, but not children of controls.</span>
<span class="sd">        New groups may not be added.</span>
<span class="sd">        A control containing controls cannot be added.  Controls containing controls are only available if</span>
<span class="sd">        the parent catalog was loaded from json.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># first go through the catalog and pull existing controls from the dict</span>
        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_update_all_controls_in_group</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>

        <span class="n">new_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">controls</span><span class="p">):</span>
            <span class="n">new_control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="n">new_control</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_all_controls_in_list</span><span class="p">(</span><span class="n">as_list</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">controls</span><span class="p">))</span>
            <span class="n">new_control</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">new_control</span><span class="o">.</span><span class="n">controls</span><span class="p">)</span>
            <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_control</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">new_list</span><span class="p">)</span>

        <span class="c1"># now add any new controls that are discovered in the dict</span>
        <span class="n">ids_in_catalog</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">get_control_ids_from_catalog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">control_handle</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">control_handle</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ids_in_catalog</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_insert_control_in_catalog</span><span class="p">(</span><span class="n">control_handle</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loose_param_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">_find_string_in_part</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">part</span><span class="p">:</span> <span class="n">common</span><span class="o">.</span><span class="n">Part</span><span class="p">,</span> <span class="n">seek_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">hits</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">prose</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">prose</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">seek_str</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">hits</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">control_id</span><span class="p">,</span> <span class="n">part</span><span class="o">.</span><span class="n">prose</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">sub_part</span> <span class="ow">in</span> <span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                <span class="n">hits</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_find_string_in_part</span><span class="p">(</span><span class="n">control_id</span><span class="p">,</span> <span class="n">sub_part</span><span class="p">,</span> <span class="n">seek_str</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">hits</span>

    <span class="k">def</span> <span class="nf">find_string_in_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span> <span class="n">seek_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Find all instances of this string in prose of control.&quot;&quot;&quot;</span>
        <span class="n">hits</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                <span class="n">hits</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_find_string_in_part</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">part</span><span class="p">,</span> <span class="n">seek_str</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">hits</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_full_profile_param_dict</span><span class="p">(</span><span class="n">profile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">prof</span><span class="o">.</span><span class="n">Profile</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">Parameter</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get the full mapping of param_id to modified value for this profiles set_params.&quot;&quot;&quot;</span>
        <span class="n">set_param_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">profile</span> <span class="ow">and</span> <span class="n">profile</span><span class="o">.</span><span class="n">modify</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">set_param</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">profile</span><span class="o">.</span><span class="n">modify</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">):</span>
                <span class="n">param</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">setparam_to_param</span><span class="p">(</span><span class="n">set_param</span><span class="o">.</span><span class="n">param_id</span><span class="p">,</span> <span class="n">set_param</span><span class="p">)</span>
                <span class="n">set_param_dict</span><span class="p">[</span><span class="n">set_param</span><span class="o">.</span><span class="n">param_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">param</span>
        <span class="k">return</span> <span class="n">set_param_dict</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_profile_param_dict</span><span class="p">(</span>
        <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span> <span class="n">profile_param_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">Parameter</span><span class="p">],</span> <span class="n">values_only</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">Parameter</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the dict of params for this control including possible overrides made by the profile modifications.</span>

<span class="sd">        Args:</span>
<span class="sd">            control: The control being queried</span>
<span class="sd">            profile_param_dict: The full dict of params and modified values made by the profile</span>

<span class="sd">        Returns:</span>
<span class="sd">            mapping of param ids to their final parameter states after possible modify by the profile setparameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get the mapping of param_id&#39;s to params for this control, excluding those with no value set</span>
        <span class="n">param_dict</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_control_param_dict</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">values_only</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">profile_param_dict</span><span class="p">:</span>
                <span class="n">param_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">profile_param_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">param_dict</span>

    <span class="k">def</span> <span class="nf">_get_full_param_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">Parameter</span><span class="p">]:</span>
        <span class="n">param_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># build the full mapping of params to values from the catalog interface</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_dict</span><span class="p">():</span>
            <span class="n">param_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_control_param_dict</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">param_dict</span>

    <span class="k">def</span> <span class="nf">_change_prose_with_param_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_format</span><span class="p">,</span> <span class="n">param_rep</span><span class="p">,</span> <span class="n">show_value_warnings</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Go through all controls and change prose based on param values.&quot;&quot;&quot;</span>
        <span class="n">param_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_full_param_dict</span><span class="p">()</span>
        <span class="c1"># insert param values into prose of all controls</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_dict</span><span class="p">():</span>
            <span class="n">ControlInterface</span><span class="o">.</span><span class="n">replace_control_prose</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">param_dict</span><span class="p">,</span> <span class="n">param_format</span><span class="p">,</span> <span class="n">param_rep</span><span class="p">,</span> <span class="n">show_value_warnings</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_display_name_and_ns</span><span class="p">(</span><span class="n">param</span><span class="p">:</span> <span class="n">common</span><span class="o">.</span><span class="n">Parameter</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">props</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">const</span><span class="o">.</span><span class="n">DISPLAY_NAME</span><span class="p">:</span>
                <span class="n">ns</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">prop</span><span class="o">.</span><span class="n">ns</span><span class="p">)</span> <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">ns</span> <span class="k">else</span> <span class="kc">None</span>
                <span class="k">return</span> <span class="n">prop</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">ns</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_write_control_into_dir</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">,</span>
        <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span>
        <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span>
        <span class="n">found_control_alters</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">prof</span><span class="o">.</span><span class="n">Alter</span><span class="p">]</span>
    <span class="p">):</span>
        <span class="c1"># we need to create the dir structure on demand because we don&#39;t know a priori what groups are included</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">group_title</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_group_info_by_control</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">group_dir</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">md_root</span>
        <span class="n">control_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control_path</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">sub_dir</span> <span class="ow">in</span> <span class="n">control_path</span><span class="p">:</span>
            <span class="n">group_dir</span> <span class="o">=</span> <span class="n">group_dir</span> <span class="o">/</span> <span class="n">sub_dir</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">group_dir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">group_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">writer</span> <span class="o">=</span> <span class="n">ControlWriter</span><span class="p">()</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">write_control_for_editing</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">group_dir</span><span class="p">,</span> <span class="n">group_title</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">,</span> <span class="n">found_control_alters</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_all_rules_params_and_vals</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get rules, params, vals from the control implementation.&quot;&quot;&quot;</span>
        <span class="c1"># rules are defined in the control_imp itself</span>
        <span class="c1"># but they are linked to controls via the imp_reqs</span>
        <span class="c1"># param values may be set both by the control_imp and the imp_req</span>
        <span class="n">context</span><span class="o">.</span><span class="n">rules_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">context</span><span class="o">.</span><span class="n">rules_params_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">context</span><span class="o">.</span><span class="n">rules_param_vals</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">context</span><span class="o">.</span><span class="n">rules_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_rules_dict_from_item</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">control_implementation</span><span class="p">))</span>
        <span class="n">context</span><span class="o">.</span><span class="n">rules_params_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_params_dict_from_item</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">control_implementation</span><span class="p">))</span>
        <span class="n">context</span><span class="o">.</span><span class="n">rules_param_vals</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_param_vals_from_control_imp</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">control_implementation</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">new_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">rules_params_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">rule</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">rules_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">rule_name</span> <span class="o">=</span> <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">rule</span> <span class="k">else</span> <span class="s1">&#39;Unknown&#39;</span>
            <span class="c1"># rebuild the dict so it has desired order in yaml header</span>
            <span class="n">new_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">val</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">val</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">],</span> <span class="s1">&#39;rule-id&#39;</span><span class="p">:</span> <span class="n">rule_name</span><span class="p">,</span> <span class="s1">&#39;options&#39;</span><span class="p">:</span> <span class="n">val</span><span class="p">[</span><span class="s1">&#39;options&#39;</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="n">context</span><span class="o">.</span><span class="n">rules_params_dict</span> <span class="o">=</span> <span class="n">new_dict</span>

    <span class="k">def</span> <span class="nf">write_catalog_as_profile_markdown</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Write out the catalog as profile markdown.&quot;&quot;&quot;</span>
        <span class="n">required_section_list</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">required_sections</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">required_sections</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="n">allowed_section_list</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span> <span class="k">else</span> <span class="p">[]</span>

        <span class="c1"># Get the list of params for this profile from its set_params</span>
        <span class="c1"># this is just from the set_params</span>
        <span class="n">full_param_dict</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_full_profile_param_dict</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">profile</span><span class="p">)</span>

        <span class="n">label_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_statement_part_id_map</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">found_alters</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">read_additional_content</span><span class="p">(</span>
            <span class="n">context</span><span class="o">.</span><span class="n">md_root</span><span class="p">,</span> <span class="n">required_section_list</span><span class="p">,</span> <span class="n">label_map</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">sections_dict</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">to_markdown</span>
        <span class="p">)</span>

        <span class="c1"># write out the controls</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_catalog</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
            <span class="c1"># here we do special handling of how set-parameters merge with the yaml header</span>
            <span class="n">new_context</span> <span class="o">=</span> <span class="n">ControlContext</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">new_context</span><span class="o">.</span><span class="n">inherited_props</span><span class="p">:</span>
                <span class="n">inherited_props</span> <span class="o">=</span> <span class="n">new_context</span><span class="o">.</span><span class="n">inherited_props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">inherited_props</span><span class="p">:</span>
                    <span class="c1"># build set in order of list so that duplicates will have final value stick, then convert to list</span>
                    <span class="n">unique_props</span> <span class="o">=</span> <span class="nb">list</span><span class="p">({</span><span class="n">prop</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span> <span class="n">prop</span> <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">inherited_props</span><span class="p">}</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
                    <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_INHERITED_PROPS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="n">unique_props</span>
            <span class="c1"># get all params and vals for this control from the resolved profile catalog with block adds in effect</span>
            <span class="n">control_param_dict</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_control_param_dict</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="n">set_param_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">param_id</span><span class="p">,</span> <span class="n">param_dict</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c1"># if the param is in the full_param_dict, load its contents first and mark as profile-values</span>
                <span class="n">display_name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="k">if</span> <span class="n">param_id</span> <span class="ow">in</span> <span class="n">full_param_dict</span><span class="p">:</span>
                    <span class="c1"># get the param from the profile set_param</span>
                    <span class="n">param</span> <span class="o">=</span> <span class="n">full_param_dict</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span>
                    <span class="n">display_name</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_display_name_and_ns</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
                    <span class="c1"># assign its contents to the dict</span>
                    <span class="n">new_dict</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">parameter_to_dict</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">VALUES</span> <span class="ow">in</span> <span class="n">new_dict</span><span class="p">:</span>
                        <span class="n">new_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">PROFILE_VALUES</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">VALUES</span><span class="p">]</span>
                        <span class="n">new_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">VALUES</span><span class="p">)</span>
                    <span class="c1"># then insert the original, incoming values as values</span>
                    <span class="k">if</span> <span class="n">param_id</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="p">:</span>
                        <span class="n">orig_param</span> <span class="o">=</span> <span class="n">control_param_dict</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span>
                        <span class="n">orig_dict</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">parameter_to_dict</span><span class="p">(</span><span class="n">orig_param</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                        <span class="c1"># pull only the values from the actual control dict</span>
                        <span class="c1"># all the other elements are from the profile set_param</span>
                        <span class="n">new_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">VALUES</span><span class="p">]</span> <span class="o">=</span> <span class="n">orig_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">VALUES</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># if the profile doesnt change this param at all, show it in the header with values</span>
                    <span class="n">tmp_dict</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">parameter_to_dict</span><span class="p">(</span><span class="n">param_dict</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="n">tmp_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;values&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="n">new_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">param_id</span><span class="p">,</span> <span class="s1">&#39;values&#39;</span><span class="p">:</span> <span class="n">values</span><span class="p">}</span>
                <span class="n">new_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">display_name</span><span class="p">:</span>
                    <span class="n">new_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">DISPLAY_NAME</span><span class="p">]</span> <span class="o">=</span> <span class="n">display_name</span>
                <span class="n">set_param_dict</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_dict</span>
            <span class="k">if</span> <span class="n">set_param_dict</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">:</span>
                    <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">if</span> <span class="n">new_context</span><span class="o">.</span><span class="n">overwrite_header_values</span><span class="p">:</span>
                    <span class="c1"># update the control params with new values</span>
                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="p">:</span>
                            <span class="n">set_param_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># update the control params with any values in yaml header not set in control</span>
                    <span class="c1"># need to maintain order in the set_param_dict</span>
                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">control_param_dict</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">set_param_dict</span><span class="p">:</span>
                            <span class="n">set_param_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="n">set_param_dict</span>
            <span class="k">elif</span> <span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">:</span>
                <span class="c1"># need to cull any params that are not in control</span>
                <span class="n">pop_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="p">:</span>
                        <span class="n">pop_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_list</span><span class="p">:</span>
                    <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>

            <span class="n">new_context</span><span class="o">.</span><span class="n">required_sections</span> <span class="o">=</span> <span class="n">required_section_list</span>
            <span class="n">new_context</span><span class="o">.</span><span class="n">allowed_sections</span> <span class="o">=</span> <span class="n">allowed_section_list</span>
            <span class="n">found_control_alters</span> <span class="o">=</span> <span class="p">[</span><span class="n">alter</span> <span class="k">for</span> <span class="n">alter</span> <span class="ow">in</span> <span class="n">found_alters</span> <span class="k">if</span> <span class="n">alter</span><span class="o">.</span><span class="n">control_id</span> <span class="o">==</span> <span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_control_into_dir</span><span class="p">(</span><span class="n">new_context</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">,</span> <span class="n">found_control_alters</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">write_catalog_as_ssp_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Write out the catalog as component markdown.&quot;&quot;&quot;</span>
        <span class="c1"># in component mode get rules, params, and param values from the current control_implementation</span>
        <span class="c1"># the catalog is written out in pieces per control_imp</span>
        <span class="n">allowed_section_list</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span> <span class="k">else</span> <span class="p">[]</span>

        <span class="c1"># write out the controls</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_catalog</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
            <span class="c1"># here we do special handling of how set-parameters merge with the yaml header</span>
            <span class="n">new_context</span> <span class="o">=</span> <span class="n">ControlContext</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
            <span class="n">new_context</span><span class="o">.</span><span class="n">allowed_sections</span> <span class="o">=</span> <span class="n">allowed_section_list</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_control_into_dir</span><span class="p">(</span><span class="n">new_context</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">,</span> <span class="p">[])</span>

    <span class="k">def</span> <span class="nf">write_catalog_as_component_markdown</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Write out the catalog as component markdown.&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_update_values</span><span class="p">(</span><span class="n">set_param</span><span class="p">:</span> <span class="n">comp</span><span class="o">.</span><span class="n">SetParameter</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">set_param</span><span class="o">.</span><span class="n">param_id</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="p">:</span>
                <span class="n">control_param_dict</span><span class="p">[</span><span class="n">set_param</span><span class="o">.</span><span class="n">param_id</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="n">set_param</span><span class="o">.</span><span class="n">values</span>
            <span class="k">if</span> <span class="n">set_param</span><span class="o">.</span><span class="n">param_id</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">rules_param_vals</span><span class="p">:</span>
                <span class="n">values</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">v</span><span class="o">.</span><span class="n">__root__</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">set_param</span><span class="o">.</span><span class="n">values</span><span class="p">)])</span>
                <span class="n">new_context</span><span class="o">.</span><span class="n">rules_param_vals</span><span class="p">[</span><span class="n">set_param</span><span class="o">.</span><span class="n">param_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>

        <span class="c1"># get the rule information for the current control implementation being written out in this context</span>
        <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_all_rules_params_and_vals</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

        <span class="n">control_ids_in_comp_imp</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">imp_req</span><span class="o">.</span><span class="n">control_id</span> <span class="k">for</span> <span class="n">imp_req</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">control_implementation</span><span class="o">.</span><span class="n">implemented_requirements</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_catalog</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">control</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">control_ids_in_comp_imp</span><span class="p">:</span>
                <span class="n">new_context</span> <span class="o">=</span> <span class="n">ControlContext</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
                <span class="n">control_param_dict</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_control_param_dict</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">set_param</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">new_context</span><span class="o">.</span><span class="n">control_implementation</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">):</span>
                    <span class="n">_update_values</span><span class="p">(</span><span class="n">set_param</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">imp_req</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">new_context</span><span class="o">.</span><span class="n">control_implementation</span><span class="o">.</span><span class="n">implemented_requirements</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">imp_req</span><span class="o">.</span><span class="n">control_id</span> <span class="o">==</span> <span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">set_param</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">imp_req</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">):</span>
                            <span class="n">_update_values</span><span class="p">(</span><span class="n">set_param</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">control_param_dict</span><span class="p">:</span>
                    <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">PARAM_VALUES_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">PARAM_VALUES_TAG</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span>
                            <span class="n">ControlInterface</span><span class="o">.</span><span class="n">param_to_str</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">ParameterRep</span><span class="o">.</span><span class="n">VALUE_OR_EMPTY_STRING</span><span class="p">)</span>
                        <span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_write_control_into_dir</span><span class="p">(</span><span class="n">new_context</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">,</span> <span class="p">[])</span>

    <span class="k">def</span> <span class="nf">write_catalog_as_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Write the catalog as a simple catalog.&quot;&quot;&quot;</span>
        <span class="n">required_section_list</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">required_sections</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">required_sections</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="n">allowed_section_list</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span> <span class="k">else</span> <span class="p">[]</span>

        <span class="c1"># write out the controls</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_catalog</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
            <span class="c1"># here we do special handling of how set-parameters merge with the yaml header</span>
            <span class="n">new_context</span> <span class="o">=</span> <span class="n">ControlContext</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

            <span class="n">control_param_dict</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_control_param_dict</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="n">set_param_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">param_id</span><span class="p">,</span> <span class="n">param_dict</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">tmp_dict</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">parameter_to_dict</span><span class="p">(</span><span class="n">param_dict</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">values</span> <span class="o">=</span> <span class="n">tmp_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;values&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="n">new_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;values&#39;</span><span class="p">:</span> <span class="n">values</span><span class="p">}</span>
                <span class="n">set_param_dict</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_dict</span>
            <span class="k">if</span> <span class="n">set_param_dict</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">:</span>
                    <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">if</span> <span class="n">new_context</span><span class="o">.</span><span class="n">overwrite_header_values</span><span class="p">:</span>
                    <span class="c1"># update the control params with new values</span>
                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="p">:</span>
                            <span class="n">set_param_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># update the control params with any values in yaml header not set in control</span>
                    <span class="c1"># need to maintain order in the set_param_dict</span>
                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">control_param_dict</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">set_param_dict</span><span class="p">:</span>
                            <span class="n">set_param_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="n">set_param_dict</span>
            <span class="k">elif</span> <span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">:</span>
                <span class="c1"># need to cull any params that are not in control</span>
                <span class="n">pop_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="p">:</span>
                        <span class="n">pop_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_list</span><span class="p">:</span>
                    <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>

            <span class="n">new_context</span><span class="o">.</span><span class="n">required_sections</span> <span class="o">=</span> <span class="n">required_section_list</span>
            <span class="n">new_context</span><span class="o">.</span><span class="n">allowed_sections</span> <span class="o">=</span> <span class="n">allowed_section_list</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_control_into_dir</span><span class="p">(</span><span class="n">new_context</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">,</span> <span class="p">[])</span>

    <span class="k">def</span> <span class="nf">write_catalog_as_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write out the catalog controls from dict as markdown files to the specified directory.</span>

<span class="sd">        Args:</span>
<span class="sd">            context: The context of the catalog markdown creation.</span>
<span class="sd">            part_id_map: Mapping of part_id to label for all controls</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create the directory in which to write the control markdown files</span>
        <span class="n">context</span><span class="o">.</span><span class="n">md_root</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">PROFILE</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write_catalog_as_profile_markdown</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write_catalog_as_component_markdown</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">SSP</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write_catalog_as_ssp_markdown</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write_catalog_as_catalog</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_group_ids_and_dirs</span><span class="p">(</span><span class="n">md_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a sorted map of group id to group dir that is ordered by group id.</span>

<span class="sd">        This includes &#39;&#39; as the root group id.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># manually insert the top dir as group &#39;&#39;</span>
        <span class="n">id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="n">md_path</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">gdir</span> <span class="ow">in</span> <span class="n">md_path</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">gdir</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                <span class="n">id_map</span><span class="p">[</span><span class="n">gdir</span><span class="o">.</span><span class="n">stem</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdir</span>
        <span class="c1"># rebuild the dict by inserting items in manner sorted by key</span>
        <span class="n">sorted_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">id_map</span><span class="p">):</span>
            <span class="n">sorted_id_map</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">id_map</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">sorted_id_map</span>

    <span class="k">def</span> <span class="nf">read_catalog_from_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">md_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">set_parameters_flag</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">cat</span><span class="o">.</span><span class="n">Catalog</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the groups and catalog controls from the given directory.</span>

<span class="sd">        This will overwrite the existing groups and controls in the catalog.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span> <span class="o">=</span> <span class="n">gens</span><span class="o">.</span><span class="n">generate_sample_model</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">Catalog</span><span class="p">)</span>
        <span class="n">id_map</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_group_ids_and_dirs</span><span class="p">(</span><span class="n">md_path</span><span class="p">)</span>
        <span class="n">groups</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># read each group dir</span>
        <span class="k">for</span> <span class="n">group_id</span><span class="p">,</span> <span class="n">group_dir</span> <span class="ow">in</span> <span class="n">id_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">control_list_raw</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">group_title</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="c1"># Need to get group title from at least one control in this directory</span>
            <span class="c1"># All controls in dir should have same group title</span>
            <span class="c1"># Set group title to the first one found and warn if different non-empty title appears</span>
            <span class="c1"># Controls with empty group titles are tolerated but at least one title must be present or warning given</span>
            <span class="c1"># The special group with no name that has the catalog as parent is just a list and has no title</span>
            <span class="k">for</span> <span class="n">control_path</span> <span class="ow">in</span> <span class="n">group_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.md&#39;</span><span class="p">):</span>
                <span class="n">control</span><span class="p">,</span> <span class="n">control_group_title</span> <span class="o">=</span> <span class="n">ControlReader</span><span class="o">.</span><span class="n">read_control</span><span class="p">(</span><span class="n">control_path</span><span class="p">,</span> <span class="n">set_parameters_flag</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">control_group_title</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">group_title</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">control_group_title</span> <span class="o">!=</span> <span class="n">group_title</span><span class="p">:</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s1">&#39;Control </span><span class="si">{</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> group title </span><span class="si">{</span><span class="n">control_group_title</span><span class="si">}</span><span class="s1"> differs from </span><span class="si">{</span><span class="n">group_title</span><span class="si">}</span><span class="s1">&#39;</span>
                            <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">group_title</span> <span class="o">=</span> <span class="n">control_group_title</span>
                <span class="n">control_list_raw</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>
            <span class="n">control_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">control_list_raw</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">control</span><span class="p">:</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_sort_id</span><span class="p">(</span><span class="n">control</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">group_id</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">group_title</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No group title found in controls for group </span><span class="si">{</span><span class="n">group_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">new_group</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">group_id</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">group_title</span><span class="p">)</span>
                <span class="n">new_group</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">control_list</span><span class="p">)</span>
                <span class="n">groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_group</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># if the list of controls has no group id it also has no title and is just the controls of the catalog</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">control_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_create_control_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">read_catalog_imp_reqs</span><span class="p">(</span>
        <span class="n">md_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">avail_comps</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">generic</span><span class="o">.</span><span class="n">GenericComponent</span><span class="p">],</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">generic</span><span class="o">.</span><span class="n">GenericImplementedRequirement</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Read the full set of control implemented requirements from markdown.</span>

<span class="sd">        Args:</span>
<span class="sd">            md_path: Path to the markdown control files, with directories for each group</span>
<span class="sd">            avail_comps: Dict mapping component names to known components</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of implemented requirements gathered from each control</span>

<span class="sd">        Notes:</span>
<span class="sd">            As the controls are read into the catalog the needed components are added if not already available.</span>
<span class="sd">            avail_comps provides the mapping of component name to the actual component.</span>
<span class="sd">            This is only used for ssp via catalog_interface</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">imp_req_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">generic</span><span class="o">.</span><span class="n">GenericImplementedRequirement</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">group_path</span> <span class="ow">in</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_group_ids_and_dirs</span><span class="p">(</span><span class="n">md_path</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">control_file</span> <span class="ow">in</span> <span class="n">group_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.md&#39;</span><span class="p">):</span>
                <span class="n">sort_id</span><span class="p">,</span> <span class="n">imp_req</span> <span class="o">=</span> <span class="n">ControlReader</span><span class="o">.</span><span class="n">read_implemented_requirement</span><span class="p">(</span><span class="n">control_file</span><span class="p">,</span> <span class="n">avail_comps</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
                <span class="n">imp_req_map</span><span class="p">[</span><span class="n">sort_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">imp_req</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">imp_req_map</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">imp_req_map</span><span class="o">.</span><span class="n">keys</span><span class="p">())]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">read_additional_content</span><span class="p">(</span>
        <span class="n">md_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
        <span class="n">required_sections_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">label_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span>
        <span class="n">sections_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">write_mode</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">prof</span><span class="o">.</span><span class="n">Alter</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Read all markdown controls and return list of alters plus control param dict and param sort map.&quot;&quot;&quot;</span>
        <span class="n">alters_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">prof</span><span class="o">.</span><span class="n">Alter</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">final_param_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">param_sort_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">group_path</span> <span class="ow">in</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_group_ids_and_dirs</span><span class="p">(</span><span class="n">md_path</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">control_file</span> <span class="ow">in</span> <span class="n">group_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.md&#39;</span><span class="p">):</span>
                <span class="n">sort_id</span><span class="p">,</span> <span class="n">control_alters</span><span class="p">,</span> <span class="n">control_param_dict</span> <span class="o">=</span> <span class="n">ControlReader</span><span class="o">.</span><span class="n">read_editable_content</span><span class="p">(</span>
                    <span class="n">control_file</span><span class="p">,</span>
                    <span class="n">required_sections_list</span><span class="p">,</span>
                    <span class="n">label_map</span><span class="p">,</span>
                    <span class="n">sections_dict</span><span class="p">,</span>
                    <span class="n">write_mode</span>
                <span class="p">)</span>
                <span class="n">alters_map</span><span class="p">[</span><span class="n">sort_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">control_alters</span>
                <span class="k">for</span> <span class="n">param_id</span><span class="p">,</span> <span class="n">param_dict</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="c1"># if profile_values are present, overwrite values with them</span>
                    <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">PROFILE_VALUES</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">:</span>
                        <span class="n">param_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">VALUES</span><span class="p">]</span> <span class="o">=</span> <span class="n">param_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">PROFILE_VALUES</span><span class="p">)</span>
                        <span class="n">final_param_dict</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">param_dict</span>
                        <span class="n">param_sort_map</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">sort_id</span>
        <span class="n">new_alters</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">prof</span><span class="o">.</span><span class="n">Alter</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># fill the alters according to the control sorting order</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">alters_map</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">new_alters</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">alters_map</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">new_alters</span><span class="p">,</span> <span class="n">final_param_dict</span><span class="p">,</span> <span class="n">param_sort_map</span>

    <span class="k">def</span> <span class="nf">get_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get the available sections by a full index of all controls.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="n">part</span><span class="o">.</span><span class="n">name</span>
                <span class="k">for</span> <span class="n">control_handle</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">control_handle</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">const</span><span class="o">.</span><span class="n">STATEMENT</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">merge_controls</span><span class="p">(</span><span class="n">dest</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span> <span class="n">src</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span> <span class="n">replace_params</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Merge the src control into dest.</span>

<span class="sd">        Args:</span>
<span class="sd">            dest: destination control into which content will be added</span>
<span class="sd">            src: source control with new content</span>
<span class="sd">            replace_params: replace the control params with the new ones</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ControlInterface</span><span class="o">.</span><span class="n">merge_parts</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">src</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">replace_params</span><span class="p">:</span>
            <span class="n">dest</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">params</span>

    <span class="k">def</span> <span class="nf">_find_control_in_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ControlHandle</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find a representative control for this group and its control handle.</span>

<span class="sd">        This is a simple way to get group info (title etc.) given only group id.</span>
<span class="sd">        It is not intended for high performance loops.  Use only as needed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">control_id</span><span class="p">,</span> <span class="n">control_handle</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">control_handle</span><span class="o">.</span><span class="n">group_id</span> <span class="o">==</span> <span class="n">group_id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">control_id</span><span class="p">,</span> <span class="n">control_handle</span>
        <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No controls found for group </span><span class="si">{</span><span class="n">group_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">merge_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">catalog</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Catalog</span><span class="p">,</span> <span class="n">replace_params</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Merge the provided new catalog controls into the original catalog in this catalog interface.</span>

<span class="sd">        Args:</span>
<span class="sd">            catalog: catalog containing controls that are merged into the current catalog of the interface</span>
<span class="sd">            replace_params: replace all params in the control with the new ones</span>

<span class="sd">        Notes:</span>
<span class="sd">            This is mainly to support the reading of a catalog from markdown.  It allows retention of content such as</span>
<span class="sd">            metadata and backmatter, along with labels and other parameter attributes that aren&#39;t in markdown.</span>
<span class="sd">            The list of controls and group structure is specified by the markdown structure - but this doesn&#39;t allow</span>
<span class="sd">            controls to contain controls.  Group lists are specified per directory.</span>

<span class="sd">            Reading the markdown tells you groups and controls in them - and groups in groups.</span>
<span class="sd">            Controls cannot change groups.  If the control was in the original json, its parts are replaced,</span>
<span class="sd">            including its parameters.  Only values may be specified.  If no value specified, the value is unset in json.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cat_interface</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="p">(</span><span class="n">catalog</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">cat_interface</span><span class="o">.</span><span class="n">get_all_controls_from_dict</span><span class="p">():</span>
            <span class="n">group_id</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">cat_interface</span><span class="o">.</span><span class="n">get_group_info_by_control</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="n">dest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dest</span><span class="p">:</span>
                <span class="n">dest_group</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_group_info_by_control</span><span class="p">(</span><span class="n">dest</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">dest_group</span> <span class="o">!=</span> <span class="n">group_id</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Markdown for control </span><span class="si">{</span><span class="n">src</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> has different group id.&#39;</span><span class="p">)</span>
                <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">merge_controls</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">replace_params</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">replace_control</span><span class="p">(</span><span class="n">dest</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># this is a new control that isn&#39;t already in the merge destination</span>
                <span class="c1"># need to add the control knowing its group must already exist</span>
                <span class="c1"># get group info from an arbitrary control already present in group</span>
                <span class="n">_</span><span class="p">,</span> <span class="n">control_handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_control_in_group</span><span class="p">(</span><span class="n">group_id</span><span class="p">)</span>
                <span class="n">new_control_handle</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">control_handle</span><span class="p">)</span>
                <span class="n">new_control_handle</span><span class="o">.</span><span class="n">control</span> <span class="o">=</span> <span class="n">src</span>
                <span class="c1"># add the control and its handle to the param_dict</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">src</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_control_handle</span>

        <span class="c1"># now need to cull any controls that are not in the src catalog</span>
        <span class="n">handled_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">cat_interface</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">orig_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">extra_ids</span> <span class="o">=</span> <span class="n">orig_ids</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">handled_ids</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">extra_id</span> <span class="ow">in</span> <span class="n">extra_ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">extra_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_catalog_controls</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">





<h5 id="trestle.core.catalog_interface.CatalogInterface-classes">Classes<a href="#trestle.core.catalog_interface.CatalogInterface-classes" class="headerlink" title="Permanent link"></a></h5>

  <div class="doc doc-object doc-class">



<h6 id="trestle.core.catalog_interface.CatalogInterface.ControlHandle" class="doc doc-heading">
        <code>
ControlHandle        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-dataclass"><code>dataclass</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.ControlHandle" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Convenience class for handling controls as members of a group.</p>
<p>group_id: id of parent group or '' if not in a group
group_title: title of the group
group_class: class of the group
path: path of parent groups leading to this control - without the final control_id, or [''] if in cat list
control: the control itself</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ControlHandle</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Convenience class for handling controls as members of a group.</span>

<span class="sd">    group_id: id of parent group or &#39;&#39; if not in a group</span>
<span class="sd">    group_title: title of the group</span>
<span class="sd">    group_class: class of the group</span>
<span class="sd">    path: path of parent groups leading to this control - without the final control_id, or [&#39;&#39;] if in cat list</span>
<span class="sd">    control: the control itself</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">group_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">group_title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">group_class</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">group_path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">control_path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h8 id="trestle.core.catalog_interface.CatalogInterface.ControlHandle.control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">control</span><span class="p">:</span> <span class="n">Control</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-dataclass-field"><code>dataclass-field</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.ControlHandle.control" class="headerlink" title="Permanent link"></a></h8>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h8 id="trestle.core.catalog_interface.CatalogInterface.ControlHandle.control_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">control_path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-dataclass-field"><code>dataclass-field</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.ControlHandle.control_path" class="headerlink" title="Permanent link"></a></h8>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h8 id="trestle.core.catalog_interface.CatalogInterface.ControlHandle.group_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">group_class</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-dataclass-field"><code>dataclass-field</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.ControlHandle.group_class" class="headerlink" title="Permanent link"></a></h8>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h8 id="trestle.core.catalog_interface.CatalogInterface.ControlHandle.group_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">group_id</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-dataclass-field"><code>dataclass-field</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.ControlHandle.group_id" class="headerlink" title="Permanent link"></a></h8>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h8 id="trestle.core.catalog_interface.CatalogInterface.ControlHandle.group_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">group_path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-dataclass-field"><code>dataclass-field</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.ControlHandle.group_path" class="headerlink" title="Permanent link"></a></h8>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h8 id="trestle.core.catalog_interface.CatalogInterface.ControlHandle.group_title" class="doc doc-heading">
<code class="highlight language-python"><span class="n">group_title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-dataclass-field"><code>dataclass-field</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.ControlHandle.group_title" class="headerlink" title="Permanent link"></a></h8>

    <div class="doc doc-contents ">

    </div>

  </div>






  <div class="doc doc-object doc-method">



<h8 id="trestle.core.catalog_interface.CatalogInterface.ControlHandle.__eq__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.ControlHandle.__eq__" class="headerlink" title="Permanent link"></a></h8>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h8 id="trestle.core.catalog_interface.CatalogInterface.ControlHandle.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_id</span><span class="p">,</span> <span class="n">group_title</span><span class="p">,</span> <span class="n">group_class</span><span class="p">,</span> <span class="n">group_path</span><span class="p">,</span> <span class="n">control_path</span><span class="p">,</span> <span class="n">control</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.ControlHandle.__init__" class="headerlink" title="Permanent link"></a></h8>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h8 id="trestle.core.catalog_interface.CatalogInterface.ControlHandle.__repr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.ControlHandle.__repr__" class="headerlink" title="Permanent link"></a></h8>

    <div class="doc doc-contents ">


    </div>

  </div>





  </div>

    </div>

  </div>



<h5 id="trestle.core.catalog_interface.CatalogInterface-methods">Methods<a href="#trestle.core.catalog_interface.CatalogInterface-methods" class="headerlink" title="Permanent link"></a></h5>

  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">catalog</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.__init__" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Initialize the interface with the catalog.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">catalog</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Catalog</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Initialize the interface with the catalog.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span> <span class="o">=</span> <span class="n">catalog</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_param_control_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_generate_group_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_control_dict</span><span class="p">()</span> <span class="k">if</span> <span class="n">catalog</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">loose_param_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">param</span><span class="o">.</span><span class="n">id</span><span class="p">:</span> <span class="n">param</span>
                                                          <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">catalog</span><span class="o">.</span><span class="n">params</span><span class="p">)}</span> <span class="k">if</span> <span class="n">catalog</span> <span class="k">else</span> <span class="p">{}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.delete_control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.delete_control" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Delete the control from the control_dict based on id.</p>
<p>Delete all its dependent children also.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">delete_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Delete the control from the control_dict based on id.</span>

<span class="sd">    Delete all its dependent children also.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">control_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">control</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">sub_control_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dependent_control_ids</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">sub_control_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">control_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.delete_withdrawn_controls" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_withdrawn_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.delete_withdrawn_controls" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Delete all withdrawn controls from the catalog.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">delete_withdrawn_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Delete all withdrawn controls from the catalog.&quot;&quot;&quot;</span>
    <span class="n">delete_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_dict</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">is_withdrawn</span><span class="p">(</span><span class="n">control</span><span class="p">):</span>
            <span class="n">delete_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">id_</span> <span class="ow">in</span> <span class="n">delete_list</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_control</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.find_part_with_condition" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_part_with_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">part</span><span class="p">,</span> <span class="n">condition</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.find_part_with_condition" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Traverse part and find subpart that satisfies given condition.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_part_with_condition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">part</span><span class="p">:</span> <span class="n">common</span><span class="o">.</span><span class="n">Part</span><span class="p">,</span> <span class="n">condition</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">Part</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Traverse part and find subpart that satisfies given condition.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">condition</span><span class="p">(</span><span class="n">part</span><span class="p">):</span>
        <span class="c1"># Part that satisfies the condition is found.</span>
        <span class="k">return</span> <span class="n">part</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">subpart</span> <span class="ow">in</span> <span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                <span class="n">found_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_part_with_condition</span><span class="p">(</span><span class="n">subpart</span><span class="p">,</span> <span class="n">condition</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">found_part</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">found_part</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.find_string_in_control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_string_in_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">seek_str</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.find_string_in_control" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Find all instances of this string in prose of control.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_string_in_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span> <span class="n">seek_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Find all instances of this string in prose of control.&quot;&quot;&quot;</span>
    <span class="n">hits</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
            <span class="n">hits</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_find_string_in_part</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">part</span><span class="p">,</span> <span class="n">seek_str</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">hits</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_all_controls_from_catalog" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_all_controls_from_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recurse</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_all_controls_from_catalog" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Yield all controls from the actual catalog by group including optional sub controls.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>recurse</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to recurse within controls, but groups are always recursed</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Iterator[trestle.oscal.catalog.Control]</code></td>
      <td><p>iterator of the controls in the catalog</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition notes">
<p class="admonition-title">Notes</p>
<p>This follows the actual structure of the catalog and groups</p>
</div>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_all_controls_from_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recurse</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Yield all controls from the actual catalog by group including optional sub controls.</span>

<span class="sd">    Args:</span>
<span class="sd">        recurse: Whether to recurse within controls, but groups are always recursed</span>

<span class="sd">    Returns:</span>
<span class="sd">        iterator of the controls in the catalog</span>

<span class="sd">    Notes:</span>
<span class="sd">        This follows the actual structure of the catalog and groups</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
            <span class="n">controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_controls_in_group</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">recurse</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">control</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
        <span class="n">cat_controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_controls_in_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">controls</span><span class="p">,</span> <span class="n">recurse</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">cat_controls</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">control</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_all_controls_from_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_all_controls_from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_all_controls_from_dict" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Yield individual controls from the dict.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_all_controls_from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Yield individual controls from the dict.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">handle</span><span class="o">.</span><span class="n">control</span> <span class="k">for</span> <span class="n">handle</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_all_groups_from_catalog" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_all_groups_from_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_all_groups_from_catalog" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Retrieve all groups in the catalog sorted by group_id.</p>
<p>This ignores controls that are direct children of the catalog.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_all_groups_from_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve all groups in the catalog sorted by group_id.</span>

<span class="sd">    This ignores controls that are direct children of the catalog.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">groups</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">my_group</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_groups_from_group</span><span class="p">(</span><span class="n">my_group</span><span class="p">):</span>
                <span class="n">groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">groups</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">group</span><span class="p">:</span> <span class="n">group</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_catalog" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_catalog" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Safe method to get catalog after forced update from catalog dict.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">cat</span><span class="o">.</span><span class="n">Catalog</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Safe method to get catalog after forced update from catalog dict.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_catalog_controls</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_catalog_title" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_catalog_title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_catalog_title" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get the title of the catalog.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_catalog_title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Get the title of the catalog.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">title</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_control" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get control from the control dict with this id.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Get control from the control dict with this id.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">control_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control_id</span><span class="p">]</span><span class="o">.</span><span class="n">control</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_control_by_param_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_control_by_param_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_id</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_control_by_param_id" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get control from catalog that has this param id using the dict.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_control_by_param_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Get control from catalog that has this param id using the dict.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">param_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_param_control_map</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_param_control_map</span><span class="p">[</span><span class="n">param_id</span><span class="p">])</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_control_id_and_status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_control_id_and_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_name</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_control_id_and_status" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get the control id and status using the control name.</p>
<p>Returns empty string if status not found.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_control_id_and_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the control id and status using the control name.</span>

<span class="sd">    Returns empty string if status not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_dict</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_label</span><span class="p">(</span><span class="n">control</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">control_name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_prop</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">status</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_control_ids" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_control_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_control_ids" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get all control ids from the control dict.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_control_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Get all control ids from the control dict.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_control_ids_from_catalog" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_control_ids_from_catalog</span><span class="p">(</span><span class="n">catalog</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.get_control_ids_from_catalog" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get all control ids from a catalog.</p>
<p>This is intended to provide a quick list of all controls in a catalog without the expense of building the
control dict.  So, if repeated queries are made into a catalog, it is worth instantiating a CatalogInterface
and associated control dict.  Otherwise just use this to get a list of all controls.</p>
<p>This function is needed within the CatalogInterface in order to determine if new controls have been added
to the dict and need to be inserted in the actual catalog during update.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_control_ids_from_catalog</span><span class="p">(</span><span class="n">catalog</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Catalog</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get all control ids from a catalog.</span>

<span class="sd">    This is intended to provide a quick list of all controls in a catalog without the expense of building the</span>
<span class="sd">    control dict.  So, if repeated queries are made into a catalog, it is worth instantiating a CatalogInterface</span>
<span class="sd">    and associated control dict.  Otherwise just use this to get a list of all controls.</span>

<span class="sd">    This function is needed within the CatalogInterface in order to determine if new controls have been added</span>
<span class="sd">    to the dict and need to be inserted in the actual catalog during update.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">controls</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_all_controls_in_list</span><span class="p">(</span><span class="n">as_list</span><span class="p">(</span><span class="n">catalog</span><span class="o">.</span><span class="n">controls</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">id_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">control</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">catalog</span><span class="o">.</span><span class="n">groups</span><span class="p">):</span>
        <span class="n">controls</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_all_controls_in_group</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">id_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">control</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">controls</span><span class="p">)])</span>
    <span class="k">return</span> <span class="n">id_list</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_control_part_prose" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_control_part_prose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">,</span> <span class="n">part_name</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_control_part_prose" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get the prose for a named part in the control.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>control_id</code></td>
        <td><code>str</code></td>
        <td><p>id of the control</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>part_name</code></td>
        <td><code>str</code></td>
        <td><p>name of the part</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>Single string concatenating prose from all parts and sub-parts in control with that name.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_control_part_prose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">part_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the prose for a named part in the control.</span>

<span class="sd">    Args:</span>
<span class="sd">        control_id: id of the control</span>
<span class="sd">        part_name: name of the part</span>

<span class="sd">    Returns:</span>
<span class="sd">        Single string concatenating prose from all parts and sub-parts in control with that name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">control_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_part_prose</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">part_name</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_control_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_control_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_control_path" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Return the path into the markdown directory for this control based only on the groups.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_control_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Return the path into the markdown directory for this control based only on the groups.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control_id</span><span class="p">]</span><span class="o">.</span><span class="n">group_path</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_count_of_controls_in_catalog" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_count_of_controls_in_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recurse</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_count_of_controls_in_catalog" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get count of controls from the actual catalog including optional sub controls.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_count_of_controls_in_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recurse</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Get count of controls from the actual catalog including optional sub controls.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_catalog</span><span class="p">(</span><span class="n">recurse</span><span class="p">)))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_count_of_controls_in_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_count_of_controls_in_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_count_of_controls_in_dict" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Find number of controls in the dict.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_count_of_controls_in_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Find number of controls in the dict.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_dependent_control_ids" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_dependent_control_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_dependent_control_ids" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Find all child ids of this control from the dict with recursion.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_dependent_control_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Find all child ids of this control from the dict with recursion.&quot;&quot;&quot;</span>
    <span class="n">children</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">control_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">control</span><span class="p">:</span>
        <span class="n">new_controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_controls_in_list</span><span class="p">(</span><span class="n">as_list</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">controls</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">con</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">con</span> <span class="ow">in</span> <span class="n">new_controls</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">children</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_full_control_path" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_full_control_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_full_control_path" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Return the path to the control including groups and sub-controls.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_full_control_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Return the path to the control including groups and sub-controls.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control_id</span><span class="p">]</span><span class="o">.</span><span class="n">control_path</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_group_ids" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_group_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_group_ids" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get all the group id's as a list of sorted strings.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_group_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Get all the group id&#39;s as a list of sorted strings.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">id</span><span class="p">,</span> <span class="nb">list</span><span class="p">({</span><span class="n">control</span><span class="o">.</span><span class="n">group_id</span> <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()})))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_group_info_by_control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_group_info_by_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_group_info_by_control" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get the group_id, title, class for this control from the dict.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_group_info_by_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Get the group_id, title, class for this control from the dict.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control_id</span><span class="p">]</span><span class="o">.</span><span class="n">group_id</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control_id</span><span class="p">]</span><span class="o">.</span><span class="n">group_title</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control_id</span><span class="p">]</span><span class="o">.</span><span class="n">group_class</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_sections" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_sections" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get the available sections by a full index of all controls.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Get the available sections by a full index of all controls.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="n">part</span><span class="o">.</span><span class="n">name</span>
            <span class="k">for</span> <span class="n">control_handle</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">control_handle</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">const</span><span class="o">.</span><span class="n">STATEMENT</span>
        <span class="p">}</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_sorted_controls_in_group" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_sorted_controls_in_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_id</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_sorted_controls_in_group" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get the list of controls in a group sorted by the control sort-id.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_sorted_controls_in_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Get the list of controls in a group sorted by the control sort-id.&quot;&quot;&quot;</span>
    <span class="n">controls</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_dict</span><span class="p">():</span>
        <span class="n">grp_id</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_group_info_by_control</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">grp_id</span> <span class="o">==</span> <span class="n">group_id</span><span class="p">:</span>
            <span class="n">controls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">control</span><span class="p">:</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_sort_id</span><span class="p">(</span><span class="n">control</span><span class="p">))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_statement_label_if_exists" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_statement_label_if_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">,</span> <span class="n">statement_id</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_statement_label_if_exists" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get statement label if available.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_statement_label_if_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                  <span class="n">statement_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Optional</span><span class="p">[</span><span class="n">common</span><span class="o">.</span><span class="n">Part</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Get statement label if available.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">does_part_exists</span><span class="p">(</span><span class="n">part</span><span class="p">:</span> <span class="n">common</span><span class="o">.</span><span class="n">Part</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">does_match</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">{</span><span class="n">const</span><span class="o">.</span><span class="n">STATEMENT</span><span class="p">,</span> <span class="s1">&#39;item&#39;</span><span class="p">}</span> <span class="ow">and</span> <span class="n">part</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">statement_id</span><span class="p">:</span>
            <span class="n">does_match</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">does_match</span>

    <span class="n">control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">control_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">control</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="kc">None</span>
    <span class="n">label</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">found_part</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">):</span>
            <span class="c1"># Performance OSCAL assumption, ids are nested so recurse only if prefix</span>
            <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">id</span> <span class="ow">and</span> <span class="n">statement_id</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
                <span class="n">part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_part_with_condition</span><span class="p">(</span><span class="n">part</span><span class="p">,</span> <span class="n">does_part_exists</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">part</span><span class="p">:</span>
                    <span class="n">label</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_label</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
                    <span class="n">found_part</span> <span class="o">=</span> <span class="n">part</span>
                    <span class="k">break</span>

    <span class="k">return</span> <span class="n">label</span><span class="p">,</span> <span class="n">found_part</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_statement_part_id_map" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_statement_part_id_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_as_key</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_statement_part_id_map" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Create mapping of label to part_id for top level parts in statement of all controls.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_statement_part_id_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_as_key</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Create mapping of label to part_id for top level parts in statement of all controls.&quot;&quot;&quot;</span>
    <span class="n">id_map</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_catalog</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">statement_part</span> <span class="o">=</span> <span class="n">get_item_from_list</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">STATEMENT</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">statement_part</span><span class="p">:</span>
            <span class="n">id_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">sub_part</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">statement_part</span><span class="o">.</span><span class="n">parts</span><span class="p">):</span>
                <span class="n">label</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_label</span><span class="p">(</span><span class="n">sub_part</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">label_as_key</span><span class="p">:</span>
                    <span class="n">id_dict</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub_part</span><span class="o">.</span><span class="n">id</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">id_dict</span><span class="p">[</span><span class="n">sub_part</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">label</span>
            <span class="k">if</span> <span class="n">id_dict</span><span class="p">:</span>
                <span class="n">id_map</span><span class="p">[</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">id_dict</span>
    <span class="k">return</span> <span class="n">id_map</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.get_statement_parts" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_statement_parts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.get_statement_parts" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Get list of statement parts as dicts with indentation, label and prose.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_statement_parts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Get list of statement parts as dicts with indentation, label and prose.&quot;&quot;&quot;</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">control_id</span><span class="p">)</span>

    <span class="c1"># control may have no statement or parts</span>
    <span class="c1"># but if statement present it is first part</span>
    <span class="k">if</span> <span class="n">control</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No control found for id </span><span class="si">{</span><span class="n">control_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
        <span class="n">part</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;statement&#39;</span><span class="p">:</span>
            <span class="n">items</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_statement_sub_parts</span><span class="p">(</span><span class="n">part</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Control </span><span class="si">{</span><span class="n">control_id</span><span class="si">}</span><span class="s1"> has parts but first part name is </span><span class="si">{</span><span class="n">part</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> - not statement&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">items</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.merge_catalog" class="doc doc-heading">
<code class="highlight language-python"><span class="n">merge_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">catalog</span><span class="p">,</span> <span class="n">replace_params</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.merge_catalog" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Merge the provided new catalog controls into the original catalog in this catalog interface.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>catalog</code></td>
        <td><code>Catalog</code></td>
        <td><p>catalog containing controls that are merged into the current catalog of the interface</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>replace_params</code></td>
        <td><code>bool</code></td>
        <td><p>replace all params in the control with the new ones</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>      <div class="admonition notes">
<p class="admonition-title">Notes</p>
<p>This is mainly to support the reading of a catalog from markdown.  It allows retention of content such as
metadata and backmatter, along with labels and other parameter attributes that aren't in markdown.
The list of controls and group structure is specified by the markdown structure - but this doesn't allow
controls to contain controls.  Group lists are specified per directory.</p>
<p>Reading the markdown tells you groups and controls in them - and groups in groups.
Controls cannot change groups.  If the control was in the original json, its parts are replaced,
including its parameters.  Only values may be specified.  If no value specified, the value is unset in json.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">merge_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">catalog</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Catalog</span><span class="p">,</span> <span class="n">replace_params</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Merge the provided new catalog controls into the original catalog in this catalog interface.</span>

<span class="sd">    Args:</span>
<span class="sd">        catalog: catalog containing controls that are merged into the current catalog of the interface</span>
<span class="sd">        replace_params: replace all params in the control with the new ones</span>

<span class="sd">    Notes:</span>
<span class="sd">        This is mainly to support the reading of a catalog from markdown.  It allows retention of content such as</span>
<span class="sd">        metadata and backmatter, along with labels and other parameter attributes that aren&#39;t in markdown.</span>
<span class="sd">        The list of controls and group structure is specified by the markdown structure - but this doesn&#39;t allow</span>
<span class="sd">        controls to contain controls.  Group lists are specified per directory.</span>

<span class="sd">        Reading the markdown tells you groups and controls in them - and groups in groups.</span>
<span class="sd">        Controls cannot change groups.  If the control was in the original json, its parts are replaced,</span>
<span class="sd">        including its parameters.  Only values may be specified.  If no value specified, the value is unset in json.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cat_interface</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="p">(</span><span class="n">catalog</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">src</span> <span class="ow">in</span> <span class="n">cat_interface</span><span class="o">.</span><span class="n">get_all_controls_from_dict</span><span class="p">():</span>
        <span class="n">group_id</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">cat_interface</span><span class="o">.</span><span class="n">get_group_info_by_control</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">dest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dest</span><span class="p">:</span>
            <span class="n">dest_group</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_group_info_by_control</span><span class="p">(</span><span class="n">dest</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dest_group</span> <span class="o">!=</span> <span class="n">group_id</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">TrestleError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Markdown for control </span><span class="si">{</span><span class="n">src</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> has different group id.&#39;</span><span class="p">)</span>
            <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">merge_controls</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">replace_params</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">replace_control</span><span class="p">(</span><span class="n">dest</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># this is a new control that isn&#39;t already in the merge destination</span>
            <span class="c1"># need to add the control knowing its group must already exist</span>
            <span class="c1"># get group info from an arbitrary control already present in group</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">control_handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_control_in_group</span><span class="p">(</span><span class="n">group_id</span><span class="p">)</span>
            <span class="n">new_control_handle</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">control_handle</span><span class="p">)</span>
            <span class="n">new_control_handle</span><span class="o">.</span><span class="n">control</span> <span class="o">=</span> <span class="n">src</span>
            <span class="c1"># add the control and its handle to the param_dict</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">src</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_control_handle</span>

    <span class="c1"># now need to cull any controls that are not in the src catalog</span>
    <span class="n">handled_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">cat_interface</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">orig_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">extra_ids</span> <span class="o">=</span> <span class="n">orig_ids</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">handled_ids</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">extra_id</span> <span class="ow">in</span> <span class="n">extra_ids</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">extra_id</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">update_catalog_controls</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.merge_controls" class="doc doc-heading">
<code class="highlight language-python"><span class="n">merge_controls</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">replace_params</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.merge_controls" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Merge the src control into dest.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>dest</code></td>
        <td><code>Control</code></td>
        <td><p>destination control into which content will be added</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>src</code></td>
        <td><code>Control</code></td>
        <td><p>source control with new content</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>replace_params</code></td>
        <td><code>bool</code></td>
        <td><p>replace the control params with the new ones</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">merge_controls</span><span class="p">(</span><span class="n">dest</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span> <span class="n">src</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span> <span class="n">replace_params</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Merge the src control into dest.</span>

<span class="sd">    Args:</span>
<span class="sd">        dest: destination control into which content will be added</span>
<span class="sd">        src: source control with new content</span>
<span class="sd">        replace_params: replace the control params with the new ones</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ControlInterface</span><span class="o">.</span><span class="n">merge_parts</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="n">src</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">replace_params</span><span class="p">:</span>
        <span class="n">dest</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">params</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.read_additional_content" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_additional_content</span><span class="p">(</span><span class="n">md_path</span><span class="p">,</span> <span class="n">required_sections_list</span><span class="p">,</span> <span class="n">label_map</span><span class="p">,</span> <span class="n">sections_dict</span><span class="p">,</span> <span class="n">write_mode</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.read_additional_content" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Read all markdown controls and return list of alters plus control param dict and param sort map.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">read_additional_content</span><span class="p">(</span>
    <span class="n">md_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
    <span class="n">required_sections_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">label_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span>
    <span class="n">sections_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">write_mode</span><span class="p">:</span> <span class="nb">bool</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">prof</span><span class="o">.</span><span class="n">Alter</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Read all markdown controls and return list of alters plus control param dict and param sort map.&quot;&quot;&quot;</span>
    <span class="n">alters_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">prof</span><span class="o">.</span><span class="n">Alter</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">final_param_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">param_sort_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">group_path</span> <span class="ow">in</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_group_ids_and_dirs</span><span class="p">(</span><span class="n">md_path</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">control_file</span> <span class="ow">in</span> <span class="n">group_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.md&#39;</span><span class="p">):</span>
            <span class="n">sort_id</span><span class="p">,</span> <span class="n">control_alters</span><span class="p">,</span> <span class="n">control_param_dict</span> <span class="o">=</span> <span class="n">ControlReader</span><span class="o">.</span><span class="n">read_editable_content</span><span class="p">(</span>
                <span class="n">control_file</span><span class="p">,</span>
                <span class="n">required_sections_list</span><span class="p">,</span>
                <span class="n">label_map</span><span class="p">,</span>
                <span class="n">sections_dict</span><span class="p">,</span>
                <span class="n">write_mode</span>
            <span class="p">)</span>
            <span class="n">alters_map</span><span class="p">[</span><span class="n">sort_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">control_alters</span>
            <span class="k">for</span> <span class="n">param_id</span><span class="p">,</span> <span class="n">param_dict</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c1"># if profile_values are present, overwrite values with them</span>
                <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">PROFILE_VALUES</span> <span class="ow">in</span> <span class="n">param_dict</span><span class="p">:</span>
                    <span class="n">param_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">VALUES</span><span class="p">]</span> <span class="o">=</span> <span class="n">param_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">PROFILE_VALUES</span><span class="p">)</span>
                    <span class="n">final_param_dict</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">param_dict</span>
                    <span class="n">param_sort_map</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">sort_id</span>
    <span class="n">new_alters</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">prof</span><span class="o">.</span><span class="n">Alter</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># fill the alters according to the control sorting order</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">alters_map</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="n">new_alters</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">alters_map</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">new_alters</span><span class="p">,</span> <span class="n">final_param_dict</span><span class="p">,</span> <span class="n">param_sort_map</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.read_catalog_from_markdown" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_catalog_from_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">md_path</span><span class="p">,</span> <span class="n">set_parameters_flag</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.read_catalog_from_markdown" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Read the groups and catalog controls from the given directory.</p>
<p>This will overwrite the existing groups and controls in the catalog.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">read_catalog_from_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">md_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">set_parameters_flag</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">cat</span><span class="o">.</span><span class="n">Catalog</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read the groups and catalog controls from the given directory.</span>

<span class="sd">    This will overwrite the existing groups and controls in the catalog.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span> <span class="o">=</span> <span class="n">gens</span><span class="o">.</span><span class="n">generate_sample_model</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">Catalog</span><span class="p">)</span>
    <span class="n">id_map</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_group_ids_and_dirs</span><span class="p">(</span><span class="n">md_path</span><span class="p">)</span>
    <span class="n">groups</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># read each group dir</span>
    <span class="k">for</span> <span class="n">group_id</span><span class="p">,</span> <span class="n">group_dir</span> <span class="ow">in</span> <span class="n">id_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">control_list_raw</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">group_title</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="c1"># Need to get group title from at least one control in this directory</span>
        <span class="c1"># All controls in dir should have same group title</span>
        <span class="c1"># Set group title to the first one found and warn if different non-empty title appears</span>
        <span class="c1"># Controls with empty group titles are tolerated but at least one title must be present or warning given</span>
        <span class="c1"># The special group with no name that has the catalog as parent is just a list and has no title</span>
        <span class="k">for</span> <span class="n">control_path</span> <span class="ow">in</span> <span class="n">group_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.md&#39;</span><span class="p">):</span>
            <span class="n">control</span><span class="p">,</span> <span class="n">control_group_title</span> <span class="o">=</span> <span class="n">ControlReader</span><span class="o">.</span><span class="n">read_control</span><span class="p">(</span><span class="n">control_path</span><span class="p">,</span> <span class="n">set_parameters_flag</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">control_group_title</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">group_title</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">control_group_title</span> <span class="o">!=</span> <span class="n">group_title</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s1">&#39;Control </span><span class="si">{</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> group title </span><span class="si">{</span><span class="n">control_group_title</span><span class="si">}</span><span class="s1"> differs from </span><span class="si">{</span><span class="n">group_title</span><span class="si">}</span><span class="s1">&#39;</span>
                        <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">group_title</span> <span class="o">=</span> <span class="n">control_group_title</span>
            <span class="n">control_list_raw</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>
        <span class="n">control_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">control_list_raw</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">control</span><span class="p">:</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_sort_id</span><span class="p">(</span><span class="n">control</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">group_id</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">group_title</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No group title found in controls for group </span><span class="si">{</span><span class="n">group_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">new_group</span> <span class="o">=</span> <span class="n">cat</span><span class="o">.</span><span class="n">Group</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">group_id</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">group_title</span><span class="p">)</span>
            <span class="n">new_group</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">control_list</span><span class="p">)</span>
            <span class="n">groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_group</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># if the list of controls has no group id it also has no title and is just the controls of the catalog</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">control_list</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">groups</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_create_control_dict</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.read_catalog_imp_reqs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">read_catalog_imp_reqs</span><span class="p">(</span><span class="n">md_path</span><span class="p">,</span> <span class="n">avail_comps</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#trestle.core.catalog_interface.CatalogInterface.read_catalog_imp_reqs" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Read the full set of control implemented requirements from markdown.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>md_path</code></td>
        <td><code>Path</code></td>
        <td><p>Path to the markdown control files, with directories for each group</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>avail_comps</code></td>
        <td><code>Dict[str, trestle.core.generic_oscal.GenericComponent]</code></td>
        <td><p>Dict mapping component names to known components</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[trestle.core.generic_oscal.GenericImplementedRequirement]</code></td>
      <td><p>List of implemented requirements gathered from each control</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition notes">
<p class="admonition-title">Notes</p>
<p>As the controls are read into the catalog the needed components are added if not already available.
avail_comps provides the mapping of component name to the actual component.
This is only used for ssp via catalog_interface</p>
</div>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">read_catalog_imp_reqs</span><span class="p">(</span>
    <span class="n">md_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">avail_comps</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">generic</span><span class="o">.</span><span class="n">GenericComponent</span><span class="p">],</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">generic</span><span class="o">.</span><span class="n">GenericImplementedRequirement</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;Read the full set of control implemented requirements from markdown.</span>

<span class="sd">    Args:</span>
<span class="sd">        md_path: Path to the markdown control files, with directories for each group</span>
<span class="sd">        avail_comps: Dict mapping component names to known components</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of implemented requirements gathered from each control</span>

<span class="sd">    Notes:</span>
<span class="sd">        As the controls are read into the catalog the needed components are added if not already available.</span>
<span class="sd">        avail_comps provides the mapping of component name to the actual component.</span>
<span class="sd">        This is only used for ssp via catalog_interface</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">imp_req_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">generic</span><span class="o">.</span><span class="n">GenericImplementedRequirement</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">group_path</span> <span class="ow">in</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_group_ids_and_dirs</span><span class="p">(</span><span class="n">md_path</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">control_file</span> <span class="ow">in</span> <span class="n">group_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.md&#39;</span><span class="p">):</span>
            <span class="n">sort_id</span><span class="p">,</span> <span class="n">imp_req</span> <span class="o">=</span> <span class="n">ControlReader</span><span class="o">.</span><span class="n">read_implemented_requirement</span><span class="p">(</span><span class="n">control_file</span><span class="p">,</span> <span class="n">avail_comps</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
            <span class="n">imp_req_map</span><span class="p">[</span><span class="n">sort_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">imp_req</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">imp_req_map</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">imp_req_map</span><span class="o">.</span><span class="n">keys</span><span class="p">())]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.replace_control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">replace_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.replace_control" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Replace the control in the control_dict.</p>
<p>This only replaces the parent control and not its children.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">replace_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replace the control in the control_dict.</span>

<span class="sd">    This only replaces the parent control and not its children.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="p">[</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">]</span><span class="o">.</span><span class="n">control</span> <span class="o">=</span> <span class="n">control</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.update_catalog_controls" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_catalog_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.update_catalog_controls" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Update the actual catalog by pulling fresh controls from the dict.</p>
<p>During assembly, controls may be added, but not children of controls.
New groups may not be added.
A control containing controls cannot be added.  Controls containing controls are only available if
the parent catalog was loaded from json.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_catalog_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the actual catalog by pulling fresh controls from the dict.</span>

<span class="sd">    During assembly, controls may be added, but not children of controls.</span>
<span class="sd">    New groups may not be added.</span>
<span class="sd">    A control containing controls cannot be added.  Controls containing controls are only available if</span>
<span class="sd">    the parent catalog was loaded from json.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># first go through the catalog and pull existing controls from the dict</span>
    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">groups</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_all_controls_in_group</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>

    <span class="n">new_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">controls</span><span class="p">):</span>
        <span class="n">new_control</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_control</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">new_control</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_all_controls_in_list</span><span class="p">(</span><span class="n">as_list</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">controls</span><span class="p">))</span>
        <span class="n">new_control</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">new_control</span><span class="o">.</span><span class="n">controls</span><span class="p">)</span>
        <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_control</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="n">new_list</span><span class="p">)</span>

    <span class="c1"># now add any new controls that are discovered in the dict</span>
    <span class="n">ids_in_catalog</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">get_control_ids_from_catalog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">control_handle</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_control_dict</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">control_handle</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ids_in_catalog</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_insert_control_in_catalog</span><span class="p">(</span><span class="n">control_handle</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_catalog</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loose_param_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.write_catalog_as_catalog" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_catalog_as_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_catalog" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Write the catalog as a simple catalog.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_catalog_as_catalog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Write the catalog as a simple catalog.&quot;&quot;&quot;</span>
    <span class="n">required_section_list</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">required_sections</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">required_sections</span> <span class="k">else</span> <span class="p">[]</span>
    <span class="n">allowed_section_list</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span> <span class="k">else</span> <span class="p">[]</span>

    <span class="c1"># write out the controls</span>
    <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_catalog</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
        <span class="c1"># here we do special handling of how set-parameters merge with the yaml header</span>
        <span class="n">new_context</span> <span class="o">=</span> <span class="n">ControlContext</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

        <span class="n">control_param_dict</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_control_param_dict</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">set_param_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">param_id</span><span class="p">,</span> <span class="n">param_dict</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">tmp_dict</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">parameter_to_dict</span><span class="p">(</span><span class="n">param_dict</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">tmp_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;values&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">new_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;values&#39;</span><span class="p">:</span> <span class="n">values</span><span class="p">}</span>
            <span class="n">set_param_dict</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_dict</span>
        <span class="k">if</span> <span class="n">set_param_dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">:</span>
                <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">new_context</span><span class="o">.</span><span class="n">overwrite_header_values</span><span class="p">:</span>
                <span class="c1"># update the control params with new values</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="p">:</span>
                        <span class="n">set_param_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># update the control params with any values in yaml header not set in control</span>
                <span class="c1"># need to maintain order in the set_param_dict</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">control_param_dict</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">set_param_dict</span><span class="p">:</span>
                        <span class="n">set_param_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="n">set_param_dict</span>
        <span class="k">elif</span> <span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">:</span>
            <span class="c1"># need to cull any params that are not in control</span>
            <span class="n">pop_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="p">:</span>
                    <span class="n">pop_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_list</span><span class="p">:</span>
                <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>

        <span class="n">new_context</span><span class="o">.</span><span class="n">required_sections</span> <span class="o">=</span> <span class="n">required_section_list</span>
        <span class="n">new_context</span><span class="o">.</span><span class="n">allowed_sections</span> <span class="o">=</span> <span class="n">allowed_section_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_write_control_into_dir</span><span class="p">(</span><span class="n">new_context</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">,</span> <span class="p">[])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.write_catalog_as_component_markdown" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_catalog_as_component_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_component_markdown" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Write out the catalog as component markdown.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_catalog_as_component_markdown</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Write out the catalog as component markdown.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_update_values</span><span class="p">(</span><span class="n">set_param</span><span class="p">:</span> <span class="n">comp</span><span class="o">.</span><span class="n">SetParameter</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">set_param</span><span class="o">.</span><span class="n">param_id</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="p">:</span>
            <span class="n">control_param_dict</span><span class="p">[</span><span class="n">set_param</span><span class="o">.</span><span class="n">param_id</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="n">set_param</span><span class="o">.</span><span class="n">values</span>
        <span class="k">if</span> <span class="n">set_param</span><span class="o">.</span><span class="n">param_id</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">rules_param_vals</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">v</span><span class="o">.</span><span class="n">__root__</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">set_param</span><span class="o">.</span><span class="n">values</span><span class="p">)])</span>
            <span class="n">new_context</span><span class="o">.</span><span class="n">rules_param_vals</span><span class="p">[</span><span class="n">set_param</span><span class="o">.</span><span class="n">param_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>

    <span class="c1"># get the rule information for the current control implementation being written out in this context</span>
    <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_all_rules_params_and_vals</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

    <span class="n">control_ids_in_comp_imp</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">imp_req</span><span class="o">.</span><span class="n">control_id</span> <span class="k">for</span> <span class="n">imp_req</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">control_implementation</span><span class="o">.</span><span class="n">implemented_requirements</span><span class="p">)</span>
    <span class="p">]</span>

    <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_catalog</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">control</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">control_ids_in_comp_imp</span><span class="p">:</span>
            <span class="n">new_context</span> <span class="o">=</span> <span class="n">ControlContext</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
            <span class="n">control_param_dict</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_control_param_dict</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">set_param</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">new_context</span><span class="o">.</span><span class="n">control_implementation</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">):</span>
                <span class="n">_update_values</span><span class="p">(</span><span class="n">set_param</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">imp_req</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">new_context</span><span class="o">.</span><span class="n">control_implementation</span><span class="o">.</span><span class="n">implemented_requirements</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">imp_req</span><span class="o">.</span><span class="n">control_id</span> <span class="o">==</span> <span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">set_param</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">imp_req</span><span class="o">.</span><span class="n">set_parameters</span><span class="p">):</span>
                        <span class="n">_update_values</span><span class="p">(</span><span class="n">set_param</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">control_param_dict</span><span class="p">:</span>
                <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">PARAM_VALUES_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">PARAM_VALUES_TAG</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">none_if_empty</span><span class="p">(</span>
                        <span class="n">ControlInterface</span><span class="o">.</span><span class="n">param_to_str</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">ParameterRep</span><span class="o">.</span><span class="n">VALUE_OR_EMPTY_STRING</span><span class="p">)</span>
                    <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_write_control_into_dir</span><span class="p">(</span><span class="n">new_context</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">,</span> <span class="p">[])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.write_catalog_as_markdown" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_catalog_as_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_markdown" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Write out the catalog controls from dict as markdown files to the specified directory.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>context</code></td>
        <td><code>ControlContext</code></td>
        <td><p>The context of the catalog markdown creation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>part_id_map</code></td>
        <td><code>Dict[str, Dict[str, str]]</code></td>
        <td><p>Mapping of part_id to label for all controls</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_catalog_as_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write out the catalog controls from dict as markdown files to the specified directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        context: The context of the catalog markdown creation.</span>
<span class="sd">        part_id_map: Mapping of part_id to label for all controls</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># create the directory in which to write the control markdown files</span>
    <span class="n">context</span><span class="o">.</span><span class="n">md_root</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">PROFILE</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_catalog_as_profile_markdown</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_catalog_as_component_markdown</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">SSP</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_catalog_as_ssp_markdown</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_catalog_as_catalog</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.write_catalog_as_profile_markdown" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_catalog_as_profile_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_profile_markdown" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Write out the catalog as profile markdown.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_catalog_as_profile_markdown</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Write out the catalog as profile markdown.&quot;&quot;&quot;</span>
    <span class="n">required_section_list</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">required_sections</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">required_sections</span> <span class="k">else</span> <span class="p">[]</span>
    <span class="n">allowed_section_list</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span> <span class="k">else</span> <span class="p">[]</span>

    <span class="c1"># Get the list of params for this profile from its set_params</span>
    <span class="c1"># this is just from the set_params</span>
    <span class="n">full_param_dict</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_full_profile_param_dict</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">profile</span><span class="p">)</span>

    <span class="n">label_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_statement_part_id_map</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">found_alters</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">read_additional_content</span><span class="p">(</span>
        <span class="n">context</span><span class="o">.</span><span class="n">md_root</span><span class="p">,</span> <span class="n">required_section_list</span><span class="p">,</span> <span class="n">label_map</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">sections_dict</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">to_markdown</span>
    <span class="p">)</span>

    <span class="c1"># write out the controls</span>
    <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_catalog</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
        <span class="c1"># here we do special handling of how set-parameters merge with the yaml header</span>
        <span class="n">new_context</span> <span class="o">=</span> <span class="n">ControlContext</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_context</span><span class="o">.</span><span class="n">inherited_props</span><span class="p">:</span>
            <span class="n">inherited_props</span> <span class="o">=</span> <span class="n">new_context</span><span class="o">.</span><span class="n">inherited_props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">inherited_props</span><span class="p">:</span>
                <span class="c1"># build set in order of list so that duplicates will have final value stick, then convert to list</span>
                <span class="n">unique_props</span> <span class="o">=</span> <span class="nb">list</span><span class="p">({</span><span class="n">prop</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span> <span class="n">prop</span> <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">inherited_props</span><span class="p">}</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
                <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_INHERITED_PROPS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="n">unique_props</span>
        <span class="c1"># get all params and vals for this control from the resolved profile catalog with block adds in effect</span>
        <span class="n">control_param_dict</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_control_param_dict</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">set_param_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">param_id</span><span class="p">,</span> <span class="n">param_dict</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># if the param is in the full_param_dict, load its contents first and mark as profile-values</span>
            <span class="n">display_name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">param_id</span> <span class="ow">in</span> <span class="n">full_param_dict</span><span class="p">:</span>
                <span class="c1"># get the param from the profile set_param</span>
                <span class="n">param</span> <span class="o">=</span> <span class="n">full_param_dict</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span>
                <span class="n">display_name</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">CatalogInterface</span><span class="o">.</span><span class="n">_get_display_name_and_ns</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
                <span class="c1"># assign its contents to the dict</span>
                <span class="n">new_dict</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">parameter_to_dict</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">VALUES</span> <span class="ow">in</span> <span class="n">new_dict</span><span class="p">:</span>
                    <span class="n">new_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">PROFILE_VALUES</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">VALUES</span><span class="p">]</span>
                    <span class="n">new_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">VALUES</span><span class="p">)</span>
                <span class="c1"># then insert the original, incoming values as values</span>
                <span class="k">if</span> <span class="n">param_id</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="p">:</span>
                    <span class="n">orig_param</span> <span class="o">=</span> <span class="n">control_param_dict</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span>
                    <span class="n">orig_dict</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">parameter_to_dict</span><span class="p">(</span><span class="n">orig_param</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                    <span class="c1"># pull only the values from the actual control dict</span>
                    <span class="c1"># all the other elements are from the profile set_param</span>
                    <span class="n">new_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">VALUES</span><span class="p">]</span> <span class="o">=</span> <span class="n">orig_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">VALUES</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># if the profile doesnt change this param at all, show it in the header with values</span>
                <span class="n">tmp_dict</span> <span class="o">=</span> <span class="n">ModelUtils</span><span class="o">.</span><span class="n">parameter_to_dict</span><span class="p">(</span><span class="n">param_dict</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">values</span> <span class="o">=</span> <span class="n">tmp_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;values&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="n">new_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">param_id</span><span class="p">,</span> <span class="s1">&#39;values&#39;</span><span class="p">:</span> <span class="n">values</span><span class="p">}</span>
            <span class="n">new_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">display_name</span><span class="p">:</span>
                <span class="n">new_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">DISPLAY_NAME</span><span class="p">]</span> <span class="o">=</span> <span class="n">display_name</span>
            <span class="n">set_param_dict</span><span class="p">[</span><span class="n">param_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_dict</span>
        <span class="k">if</span> <span class="n">set_param_dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">:</span>
                <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">new_context</span><span class="o">.</span><span class="n">overwrite_header_values</span><span class="p">:</span>
                <span class="c1"># update the control params with new values</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="p">:</span>
                        <span class="n">set_param_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># update the control params with any values in yaml header not set in control</span>
                <span class="c1"># need to maintain order in the set_param_dict</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">control_param_dict</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">set_param_dict</span><span class="p">:</span>
                        <span class="n">set_param_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="n">set_param_dict</span>
        <span class="k">elif</span> <span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">:</span>
            <span class="c1"># need to cull any params that are not in control</span>
            <span class="n">pop_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">control_param_dict</span><span class="p">:</span>
                    <span class="n">pop_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_list</span><span class="p">:</span>
                <span class="n">new_context</span><span class="o">.</span><span class="n">yaml_header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">pop</span><span class="p">)</span>

        <span class="n">new_context</span><span class="o">.</span><span class="n">required_sections</span> <span class="o">=</span> <span class="n">required_section_list</span>
        <span class="n">new_context</span><span class="o">.</span><span class="n">allowed_sections</span> <span class="o">=</span> <span class="n">allowed_section_list</span>
        <span class="n">found_control_alters</span> <span class="o">=</span> <span class="p">[</span><span class="n">alter</span> <span class="k">for</span> <span class="n">alter</span> <span class="ow">in</span> <span class="n">found_alters</span> <span class="k">if</span> <span class="n">alter</span><span class="o">.</span><span class="n">control_id</span> <span class="o">==</span> <span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_write_control_into_dir</span><span class="p">(</span><span class="n">new_context</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">,</span> <span class="n">found_control_alters</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.catalog_interface.CatalogInterface.write_catalog_as_ssp_markdown" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_catalog_as_ssp_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">)</span></code>


<a href="#trestle.core.catalog_interface.CatalogInterface.write_catalog_as_ssp_markdown" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Write out the catalog as component markdown.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/catalog_interface.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_catalog_as_ssp_markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Write out the catalog as component markdown.&quot;&quot;&quot;</span>
    <span class="c1"># in component mode get rules, params, and param values from the current control_implementation</span>
    <span class="c1"># the catalog is written out in pieces per control_imp</span>
    <span class="n">allowed_section_list</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span> <span class="k">else</span> <span class="p">[]</span>

    <span class="c1"># write out the controls</span>
    <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_controls_from_catalog</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
        <span class="c1"># here we do special handling of how set-parameters merge with the yaml header</span>
        <span class="n">new_context</span> <span class="o">=</span> <span class="n">ControlContext</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="n">new_context</span><span class="o">.</span><span class="n">allowed_sections</span> <span class="o">=</span> <span class="n">allowed_section_list</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_write_control_into_dir</span><span class="p">(</span><span class="n">new_context</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">,</span> <span class="p">[])</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>

<p>handler: python</p>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../trestle.core.base_model/" class="md-footer__link md-footer__link--prev" aria-label="Previous: base_model" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              base_model
            </div>
          </div>
        </a>
      
      
        
        <a href="../trestle.core.catalog_validator/" class="md-footer__link md-footer__link--next" aria-label="Next: catalog_validator" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              catalog_validator
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>