
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for compliance-trestle package.">
      
      
      
        <link rel="canonical" href="https://ibm.github.io/compliance-trestle/api_reference/trestle.core.control_writer/">
      
      
        <link rel="prev" href="../trestle.core.control_reader/">
      
      
        <link rel="next" href="../trestle.core.docs_control_writer/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.12">
    
    
      
        <title>control_writer - Compliance Trestle</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.85bb2934.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a6bdf11c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-XT3KGMHSY8"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-XT3KGMHSY8",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-XT3KGMHSY8",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#trestle.core.control_writer" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Compliance Trestle" class="md-header__button md-logo" aria-label="Compliance Trestle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Compliance Trestle
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              control_writer
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/IBM/compliance-trestle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    IBM/compliance-trestle
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Overview
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../python_trestle_setup/" class="md-tabs__link">
      Installation
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../tutorials/trestle_sample_workflow/" class="md-tabs__link">
        Tutorials
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../mkdocs_code_of_conduct/" class="md-tabs__link">
        Contributing
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../errors/" class="md-tabs__link">
      Known limitations
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../demonstrations-content/" class="md-tabs__link">
      Demos
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../plugins/compliance-trestle-fedramp/" class="md-tabs__link">
        Plugins
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../license/" class="md-tabs__link">
      License
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../reference/third-party-result-schema-SCC/" class="md-tabs__link md-tabs__link--active">
        Reference
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Compliance Trestle" class="md-nav__button md-logo" aria-label="Compliance Trestle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Compliance Trestle
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/IBM/compliance-trestle" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    IBM/compliance-trestle
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../python_trestle_setup/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/trestle_sample_workflow/" class="md-nav__link">
        Intro to trestle workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/continuous-compliance/continuous-compliance/" class="md-nav__link">
        Compliance posture
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
          Trestle Authoring
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Trestle Authoring
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trestle_author/" class="md-nav__link">
        Governance of Authored Documents
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/ssp_profile_catalog_authoring/ssp_profile_catalog_authoring/" class="md-nav__link">
        Catalog, Profile, ComponentDefinition, and SSP Authoring
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
          Trestle Transformers and Tasks
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Trestle Transformers and Tasks
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.transformer-construction/transformer-construction/" class="md-nav__link">
        Transformer construction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.csv-to-oscal-cd/transformation/" class="md-nav__link">
        Task - task.csv-to-oscal-cd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.ocp4-cis-profile-to-oscal-catalog/transformation/" class="md-nav__link">
        Task - ocp4-cis-profile-to-oscal-catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.ocp4-cis-profile-to-oscal-cd/transformation/" class="md-nav__link">
        Task - ocp4-cis-profile-to-oscal-cd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/task.tanium-result-to-oscal-ar/transformation/" class="md-nav__link">
        Task - tanium-result-to-oscal-ar
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
      
      
      
        <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
          Trestle command-line interface (CLI)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Trestle command-line interface (CLI)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        CLI for OSCAL documents
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trestle_author_jinja/" class="md-nav__link">
        CLI for Jinja Template processing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Contributing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs_code_of_conduct/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/mkdocs_contributing/" class="md-nav__link">
        Contributing overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/IBM/compliance-trestle/graphs/contributors" class="md-nav__link">
        Contributors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../maintainers/" class="md-nav__link">
        Maintainers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/website/" class="md-nav__link">
        Documentation website
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/trestle_oscal_object_model/" class="md-nav__link">
        Trestle's object model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/DCO/" class="md-nav__link">
        Developer Certificate of Originality
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/plugins/" class="md-nav__link">
        Trestle plugin mechanism
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../errors/" class="md-nav__link">
        Known limitations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../demonstrations-content/" class="md-nav__link">
        Demos
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Plugins
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Plugins
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/compliance-trestle-fedramp/" class="md-nav__link">
        FedRAMP validation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
      
      
      
        <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/third-party-result-schema-SCC/" class="md-nav__link">
        Integrating with IBM SCC
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
          trestle API reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_9_2">
          <span class="md-nav__icon md-icon"></span>
          trestle API reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.cli/" class="md-nav__link">
        cli
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_2" id="__nav_9_2_2_label" tabindex="0">
          common
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_2">
          <span class="md-nav__icon md-icon"></span>
          common
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.common_types/" class="md-nav__link">
        common_types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.const/" class="md-nav__link">
        const
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.err/" class="md-nav__link">
        err
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.file_utils/" class="md-nav__link">
        file_utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.list_utils/" class="md-nav__link">
        list_utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.load_validate/" class="md-nav__link">
        load_validate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.log/" class="md-nav__link">
        log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.model_utils/" class="md-nav__link">
        model_utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.str_utils/" class="md-nav__link">
        str_utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.trash/" class="md-nav__link">
        trash
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.common.type_utils/" class="md-nav__link">
        type_utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_9_2_3" id="__nav_9_2_3_label" tabindex="0">
          core
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_2_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_9_2_3">
          <span class="md-nav__icon md-icon"></span>
          core
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.all_validator/" class="md-nav__link">
        all_validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.base_model/" class="md-nav__link">
        base_model
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_3_3" id="__nav_9_2_3_3_label" tabindex="0">
          catalog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_3_3">
          <span class="md-nav__icon md-icon"></span>
          catalog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.catalog.catalog_api/" class="md-nav__link">
        catalog_api
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.catalog.catalog_interface/" class="md-nav__link">
        catalog_interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.catalog.catalog_merger/" class="md-nav__link">
        catalog_merger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.catalog.catalog_reader/" class="md-nav__link">
        catalog_reader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.catalog.catalog_writer/" class="md-nav__link">
        catalog_writer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.catalog_validator/" class="md-nav__link">
        catalog_validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_5" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_3_5" id="__nav_9_2_3_5_label" tabindex="0">
          commands
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_3_5">
          <span class="md-nav__icon md-icon"></span>
          commands
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.add/" class="md-nav__link">
        add
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.assemble/" class="md-nav__link">
        assemble
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_5_3" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_3_5_3" id="__nav_9_2_3_5_3_label" tabindex="0">
          author
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_9_2_3_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_3_5_3">
          <span class="md-nav__icon md-icon"></span>
          author
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.catalog/" class="md-nav__link">
        catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.command/" class="md-nav__link">
        command
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.common/" class="md-nav__link">
        common
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.component/" class="md-nav__link">
        component
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.consts/" class="md-nav__link">
        consts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.docs/" class="md-nav__link">
        docs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.folders/" class="md-nav__link">
        folders
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.headers/" class="md-nav__link">
        headers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.jinja/" class="md-nav__link">
        jinja
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.profile/" class="md-nav__link">
        profile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.ssp/" class="md-nav__link">
        ssp
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_5_3_12" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_3_5_3_12" id="__nav_9_2_3_5_3_12_label" tabindex="0">
          versioning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_9_2_3_5_3_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_3_5_3_12">
          <span class="md-nav__icon md-icon"></span>
          versioning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.author.versioning.template_versioning/" class="md-nav__link">
        template_versioning
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.command_docs/" class="md-nav__link">
        command_docs
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_5_5" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_3_5_5" id="__nav_9_2_3_5_5_label" tabindex="0">
          common
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_9_2_3_5_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_3_5_5">
          <span class="md-nav__icon md-icon"></span>
          common
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.common.cmd_utils/" class="md-nav__link">
        cmd_utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.common.return_codes/" class="md-nav__link">
        return_codes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.create/" class="md-nav__link">
        create
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.describe/" class="md-nav__link">
        describe
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.href/" class="md-nav__link">
        href
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.import_/" class="md-nav__link">
        import_
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.init/" class="md-nav__link">
        init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.merge/" class="md-nav__link">
        merge
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.partial_object_validate/" class="md-nav__link">
        partial_object_validate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.remove/" class="md-nav__link">
        remove
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.replicate/" class="md-nav__link">
        replicate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.split/" class="md-nav__link">
        split
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.task/" class="md-nav__link">
        task
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.validate/" class="md-nav__link">
        validate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.commands.version/" class="md-nav__link">
        version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.control_context/" class="md-nav__link">
        control_context
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.control_interface/" class="md-nav__link">
        control_interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.control_reader/" class="md-nav__link">
        control_reader
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          control_writer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        control_writer
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#trestle.core.control_writer" class="md-nav__link">
    control_writer
  </a>
  
    <nav class="md-nav" aria-label="control_writer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.control_writer.logger" class="md-nav__link">
    logger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.control_writer-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.control_writer.ControlWriter" class="md-nav__link">
    ControlWriter
  </a>
  
    <nav class="md-nav" aria-label="ControlWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.control_writer.ControlWriter-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.control_writer.ControlWriter.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.control_writer.ControlWriter.write_control_for_editing" class="md-nav__link">
    write_control_for_editing()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.docs_control_writer/" class="md-nav__link">
        docs_control_writer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.draw_io/" class="md-nav__link">
        draw_io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.duplicates_validator/" class="md-nav__link">
        duplicates_validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.generators/" class="md-nav__link">
        generators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.generic_oscal/" class="md-nav__link">
        generic_oscal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.jinja/" class="md-nav__link">
        jinja
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.links_validator/" class="md-nav__link">
        links_validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_17" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_3_17" id="__nav_9_2_3_17_label" tabindex="0">
          markdown
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_3_17_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_3_17">
          <span class="md-nav__icon md-icon"></span>
          markdown
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.base_markdown_node/" class="md-nav__link">
        base_markdown_node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.control_markdown_node/" class="md-nav__link">
        control_markdown_node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.docs_markdown_node/" class="md-nav__link">
        docs_markdown_node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.markdown_api/" class="md-nav__link">
        markdown_api
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.markdown_const/" class="md-nav__link">
        markdown_const
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.markdown_processor/" class="md-nav__link">
        markdown_processor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.markdown_validator/" class="md-nav__link">
        markdown_validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.markdown.md_writer/" class="md-nav__link">
        md_writer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_18" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_3_18" id="__nav_9_2_3_18_label" tabindex="0">
          models
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_3_18_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_3_18">
          <span class="md-nav__icon md-icon"></span>
          models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.actions/" class="md-nav__link">
        actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.elements/" class="md-nav__link">
        elements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.file_content_type/" class="md-nav__link">
        file_content_type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.interfaces/" class="md-nav__link">
        interfaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.models.plans/" class="md-nav__link">
        plans
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.object_factory/" class="md-nav__link">
        object_factory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.parser/" class="md-nav__link">
        parser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.pipeline/" class="md-nav__link">
        pipeline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.profile_resolver/" class="md-nav__link">
        profile_resolver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.refs_validator/" class="md-nav__link">
        refs_validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_24" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_3_24" id="__nav_9_2_3_24_label" tabindex="0">
          remote
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_3_24_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_3_24">
          <span class="md-nav__icon md-icon"></span>
          remote
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.remote.cache/" class="md-nav__link">
        cache
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.repository/" class="md-nav__link">
        repository
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_3_26" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_3_26" id="__nav_9_2_3_26_label" tabindex="0">
          resolver
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_3_26_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_3_26">
          <span class="md-nav__icon md-icon"></span>
          resolver
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.resolver.merge/" class="md-nav__link">
        merge
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.resolver.modify/" class="md-nav__link">
        modify
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.resolver.prune/" class="md-nav__link">
        prune
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.rule_parameters_validator/" class="md-nav__link">
        rule_parameters_validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.ssp_io/" class="md-nav__link">
        ssp_io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.trestle_base_model/" class="md-nav__link">
        trestle_base_model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.validator/" class="md-nav__link">
        validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.core.validator_factory/" class="md-nav__link">
        validator_factory
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_4" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_4" id="__nav_9_2_4_label" tabindex="0">
          oscal
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_4">
          <span class="md-nav__icon md-icon"></span>
          oscal
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.assessment_plan/" class="md-nav__link">
        assessment_plan
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.assessment_results/" class="md-nav__link">
        assessment_results
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.catalog/" class="md-nav__link">
        catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.common/" class="md-nav__link">
        common
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.component/" class="md-nav__link">
        component
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.poam/" class="md-nav__link">
        poam
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.profile/" class="md-nav__link">
        profile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.oscal.ssp/" class="md-nav__link">
        ssp
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_5" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_5" id="__nav_9_2_5_label" tabindex="0">
          tasks
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_5">
          <span class="md-nav__icon md-icon"></span>
          tasks
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.base_task/" class="md-nav__link">
        base_task
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.cis_xlsx_to_oscal_catalog/" class="md-nav__link">
        cis_xlsx_to_oscal_catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.csv_to_oscal_cd/" class="md-nav__link">
        csv_to_oscal_cd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.ocp4_cis_profile_to_oscal_catalog/" class="md-nav__link">
        ocp4_cis_profile_to_oscal_catalog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.ocp4_cis_profile_to_oscal_cd/" class="md-nav__link">
        ocp4_cis_profile_to_oscal_cd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.oscal_profile_to_osco_profile/" class="md-nav__link">
        oscal_profile_to_osco_profile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.osco_result_to_oscal_ar/" class="md-nav__link">
        osco_result_to_oscal_ar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.tanium_result_to_oscal_ar/" class="md-nav__link">
        tanium_result_to_oscal_ar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.transform/" class="md-nav__link">
        transform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.xccdf_result_to_oscal_ar/" class="md-nav__link">
        xccdf_result_to_oscal_ar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.xlsx_helper/" class="md-nav__link">
        xlsx_helper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.xlsx_to_oscal_cd/" class="md-nav__link">
        xlsx_to_oscal_cd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.tasks.xlsx_to_oscal_profile/" class="md-nav__link">
        xlsx_to_oscal_profile
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_6" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_6" id="__nav_9_2_6_label" tabindex="0">
          transforms
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_6">
          <span class="md-nav__icon md-icon"></span>
          transforms
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2_6_1" >
      
      
      
        <label class="md-nav__link" for="__nav_9_2_6_1" id="__nav_9_2_6_1_label" tabindex="0">
          implementations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_9_2_6_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2_6_1">
          <span class="md-nav__icon md-icon"></span>
          implementations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.implementations.osco/" class="md-nav__link">
        osco
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.implementations.tanium/" class="md-nav__link">
        tanium
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.implementations.xccdf/" class="md-nav__link">
        xccdf
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.results/" class="md-nav__link">
        results
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.transformer_factory/" class="md-nav__link">
        transformer_factory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.transformer_helper/" class="md-nav__link">
        transformer_helper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trestle.transforms.transformer_singleton/" class="md-nav__link">
        transformer_singleton
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#trestle.core.control_writer" class="md-nav__link">
    control_writer
  </a>
  
    <nav class="md-nav" aria-label="control_writer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.control_writer.logger" class="md-nav__link">
    logger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.control_writer-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.control_writer.ControlWriter" class="md-nav__link">
    ControlWriter
  </a>
  
    <nav class="md-nav" aria-label="ControlWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.control_writer.ControlWriter-methods" class="md-nav__link">
    Methods
  </a>
  
    <nav class="md-nav" aria-label="Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trestle.core.control_writer.ControlWriter.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trestle.core.control_writer.ControlWriter.write_control_for_editing" class="md-nav__link">
    write_control_for_editing()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>control_writer</h1>

<div class="doc doc-object doc-module">



<h2 id="trestle.core.control_writer" class="doc doc-heading">
        <code>trestle.core.control_writer</code>



<a href="#trestle.core.control_writer" class="headerlink" title="Permanent link"></a></h2>

    <div class="doc doc-contents first">

      <p>Handle writing of controls to markdown.</p>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h4 id="trestle.core.control_writer.logger" class="doc doc-heading">
<code class="highlight language-python"><span class="n">logger</span></code>


<a href="#trestle.core.control_writer.logger" class="headerlink" title="Permanent link"></a></h4>

    <div class="doc doc-contents ">

    </div>

  </div>


<h3 id="trestle.core.control_writer-classes">Classes<a href="#trestle.core.control_writer-classes" class="headerlink" title="Permanent link"></a></h3>

  <div class="doc doc-object doc-class">



<h4 id="trestle.core.control_writer.ControlWriter" class="doc doc-heading">
        <code>
ControlWriter        </code>



<a href="#trestle.core.control_writer.ControlWriter" class="headerlink" title="Permanent link"></a></h4>

    <div class="doc doc-contents ">

      <p>Class to write controls as markdown.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/control_writer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ControlWriter</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class to write controls as markdown.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the class.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MDWriter</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_add_part_and_its_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">item_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For a given control add its one statement and its items to the md file after replacing params.&quot;&quot;&quot;</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                    <span class="c1"># If the part has prose write it as a raw line and not list element</span>
                    <span class="n">skip_id</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">id</span>
                    <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">prose</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">prose</span><span class="p">)</span>
                    <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_part</span><span class="p">(</span><span class="n">part</span><span class="p">,</span> <span class="n">item_type</span><span class="p">,</span> <span class="n">skip_id</span><span class="p">))</span>
            <span class="c1"># unwrap the list if it is many levels deep</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paragraph</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_list</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_yaml_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yaml_header</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">yaml_header</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">add_yaml_header</span><span class="p">(</span><span class="n">yaml_header</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_control_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span> <span class="n">group_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">print_group_title</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add the control statement and items to the md file.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paragraph</span><span class="p">()</span>
        <span class="n">control_id</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">id</span>
        <span class="n">group_name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">control_title</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">title</span>

        <span class="k">if</span> <span class="n">print_group_title</span><span class="p">:</span>
            <span class="n">group_name</span> <span class="o">=</span> <span class="s1">&#39; \[&#39;</span> <span class="o">+</span> <span class="n">group_title</span> <span class="o">+</span> <span class="s1">&#39;\]&#39;</span>

        <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">control_id</span><span class="si">}</span><span class="s1"> -</span><span class="si">{</span><span class="n">group_name</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">control_title</span><span class="si">}</span><span class="s1">&#39;</span>

        <span class="n">header_title</span> <span class="o">=</span> <span class="s1">&#39;Control Statement&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">header_title</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">set_indent_level</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_part_and_its_items</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">STATEMENT</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">ITEM</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">set_indent_level</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_control_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;objective&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paragraph</span><span class="p">()</span>
                    <span class="n">heading_title</span> <span class="o">=</span> <span class="s1">&#39;Control Objective&#39;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">heading_title</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">set_indent_level</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_add_part_and_its_items</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="s1">&#39;objective&#39;</span><span class="p">,</span> <span class="s1">&#39;objective&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">set_indent_level</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                    <span class="k">return</span>

    <span class="k">def</span> <span class="nf">_add_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span> <span class="n">allowed_sections</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add the extra control sections after the main ones.&quot;&quot;&quot;</span>
        <span class="n">skip_section_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">STATEMENT</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">ITEM</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">OBJECTIVE_PART</span><span class="p">]</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">prose</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_section</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">skip_section_list</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="n">allowed_sections</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_sections</span><span class="p">:</span>
                <span class="n">skip_section_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">prose</span><span class="p">:</span>
                <span class="c1"># section title will be from the section_dict, the part title, or the part name in that order</span>
                <span class="c1"># this way the user-provided section title can override the part title</span>
                <span class="n">section_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span> <span class="k">else</span> <span class="n">title</span>
                <span class="n">section_title</span> <span class="o">=</span> <span class="n">section_title</span> <span class="k">if</span> <span class="n">section_title</span> <span class="k">else</span> <span class="n">name</span>
                <span class="n">skip_section_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Control </span><span class="si">{</span><span class="n">section_title</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span><span class="n">prose</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paragraph</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_insert_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="n">ImplementationStatus</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">const</span><span class="o">.</span><span class="n">IMPLEMENTATION_STATUS_HEADER</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">state</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># this used to output remarks also</span>

    <span class="k">def</span> <span class="nf">_insert_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rules</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">rules</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Rules:&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">set_indent_level</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_list</span><span class="p">(</span><span class="n">rules</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">set_indent_level</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_insert_comp_info</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">part_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">comp_info</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentImpInfo</span><span class="p">],</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Insert prose and status from the component info.&quot;&quot;&quot;</span>
        <span class="n">level</span> <span class="o">=</span> <span class="mi">3</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">COMPONENT</span> <span class="k">else</span> <span class="mi">4</span>
        <span class="k">if</span> <span class="n">part_label</span> <span class="ow">in</span> <span class="n">comp_info</span><span class="p">:</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">comp_info</span><span class="p">[</span><span class="n">part_label</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ContextPurpose</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">,</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">SSP</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">rules</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paragraph</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">prose</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">prose</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">const</span><span class="o">.</span><span class="n">SSP_ADD_IMPLEMENTATION_FOR_ITEM_TEXT</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">part_label</span><span class="si">}</span><span class="s1"> --&gt;&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_insert_rules</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">rules</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_insert_status</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">status</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_insert_status</span><span class="p">(</span><span class="n">ImplementationStatus</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">const</span><span class="o">.</span><span class="n">STATUS_PLANNED</span><span class="p">),</span> <span class="n">level</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_component_control_prompts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">control_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">comp_dict</span><span class="p">:</span> <span class="n">CompDict</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add prompts to the markdown for the control itself, per component.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ContextPurpose</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">,</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">SSP</span><span class="p">]:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paraline</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">STATUS_PROMPT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paraline</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">RULES_WARNING</span><span class="p">)</span>
        <span class="n">did_write</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># do special handling for This System</span>
        <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">SSP</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paragraph</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">SSP_MAIN_COMP_NAME</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paragraph</span><span class="p">()</span>
            <span class="n">prose</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">const</span><span class="o">.</span><span class="n">SSP_ADD_THIS_SYSTEM_IMPLEMENTATION_FOR_CONTROL_TEXT</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">control_id</span><span class="si">}</span><span class="s1"> --&gt;&#39;</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">ImplementationStatus</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">const</span><span class="o">.</span><span class="n">STATUS_PLANNED</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">SSP_MAIN_COMP_NAME</span> <span class="ow">in</span> <span class="n">comp_dict</span><span class="p">:</span>
                <span class="n">comp_info</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">comp_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SSP_MAIN_COMP_NAME</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">comp_info</span><span class="o">.</span><span class="n">prose</span><span class="p">:</span>
                    <span class="n">prose</span> <span class="o">=</span> <span class="n">comp_info</span><span class="o">.</span><span class="n">prose</span>
                <span class="n">status</span> <span class="o">=</span> <span class="n">comp_info</span><span class="o">.</span><span class="n">status</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paraline</span><span class="p">(</span><span class="n">prose</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_insert_status</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
            <span class="n">did_write</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">sorted_comp_names</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">comp_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">comp_name</span> <span class="ow">in</span> <span class="n">sorted_comp_names</span><span class="p">:</span>
            <span class="n">dic</span> <span class="o">=</span> <span class="n">comp_dict</span><span class="p">[</span><span class="n">comp_name</span><span class="p">]</span>
            <span class="c1"># This System already handled</span>
            <span class="k">if</span> <span class="n">comp_name</span> <span class="o">==</span> <span class="n">const</span><span class="o">.</span><span class="n">SSP_MAIN_COMP_NAME</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">for</span> <span class="n">comp_info</span> <span class="ow">in</span> <span class="p">[</span><span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">dic</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">]:</span>
                <span class="c1"># don&#39;t output component name for component markdown since only one component</span>
                <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">!=</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">comp_name</span><span class="p">)</span>
                <span class="n">prose</span> <span class="o">=</span> <span class="n">comp_info</span><span class="o">.</span><span class="n">prose</span> <span class="k">if</span> <span class="n">comp_info</span><span class="o">.</span><span class="n">prose</span> <span class="o">!=</span> <span class="n">control_id</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">prose</span><span class="p">:</span>
                    <span class="n">prose</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">const</span><span class="o">.</span><span class="n">SSP_ADD_IMPLEMENTATION_FOR_CONTROL_TEXT</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">control_id</span><span class="si">}</span><span class="s1"> --&gt;&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paraline</span><span class="p">(</span><span class="n">prose</span><span class="p">)</span>
                <span class="n">level</span> <span class="o">=</span> <span class="mi">3</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">COMPONENT</span> <span class="k">else</span> <span class="mi">4</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_insert_rules</span><span class="p">(</span><span class="n">comp_info</span><span class="o">.</span><span class="n">rules</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_insert_status</span><span class="p">(</span><span class="n">comp_info</span><span class="o">.</span><span class="n">status</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
                <span class="n">did_write</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">did_write</span>

    <span class="k">def</span> <span class="nf">_add_implementation_response_prompts</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span> <span class="n">comp_dict</span><span class="p">:</span> <span class="n">CompDict</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add the response request text for all parts to the markdown along with the header.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_hr</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paragraph</span><span class="p">()</span>
        <span class="c1"># top level request for implementation details</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">const</span><span class="o">.</span><span class="n">SSP_MD_IMPLEMENTATION_QUESTION</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># write out control level prose and status</span>
        <span class="n">did_write_part</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_component_control_prompts</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">comp_dict</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

        <span class="c1"># if the control has no parts written out then enter implementation in the top level entry</span>
        <span class="c1"># but if it does have parts written out, leave top level blank and provide details in the parts</span>
        <span class="c1"># Note that parts corresponding to sections don&#39;t get written out here so a check is needed</span>
        <span class="c1"># If we have responses per component then enter them in separate ### sections</span>
        <span class="k">if</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">control</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">parts</span> <span class="ow">and</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">const</span><span class="o">.</span><span class="n">STATEMENT</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">prt</span> <span class="ow">in</span> <span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">prt</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">const</span><span class="o">.</span><span class="n">ITEM</span><span class="p">:</span>
                            <span class="k">continue</span>
                        <span class="c1"># if no label guess the label from the sub-part id</span>
                        <span class="n">part_label</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_label</span><span class="p">(</span><span class="n">prt</span><span class="p">)</span>
                        <span class="n">part_label</span> <span class="o">=</span> <span class="n">prt</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">part_label</span> <span class="k">else</span> <span class="n">part_label</span>
                        <span class="c1"># only write out part if rules apply to it</span>
                        <span class="n">rules_apply</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">dic</span> <span class="ow">in</span> <span class="n">comp_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                            <span class="k">if</span> <span class="n">part_label</span> <span class="ow">in</span> <span class="n">dic</span> <span class="ow">and</span> <span class="n">dic</span><span class="p">[</span><span class="n">part_label</span><span class="p">]</span><span class="o">.</span><span class="n">rules</span><span class="p">:</span>
                                <span class="n">rules_apply</span> <span class="o">=</span> <span class="kc">True</span>
                                <span class="k">break</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">rules_apply</span><span class="p">:</span>
                            <span class="k">continue</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">did_write_part</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">SSP_MD_LEAVE_BLANK_TEXT</span><span class="p">)</span>
                            <span class="c1"># insert extra line to make mdformat happy</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">_add_line_raw</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_hr</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Implementation for part </span><span class="si">{</span><span class="n">part_label</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">wrote_label_content</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="n">sorted_comp_names</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">comp_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                        <span class="k">for</span> <span class="n">comp_name</span> <span class="ow">in</span> <span class="n">sorted_comp_names</span><span class="p">:</span>
                            <span class="n">dic</span> <span class="o">=</span> <span class="n">comp_dict</span><span class="p">[</span><span class="n">comp_name</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">comp_name</span> <span class="o">==</span> <span class="n">const</span><span class="o">.</span><span class="n">SSP_MAIN_COMP_NAME</span><span class="p">:</span>
                                <span class="k">continue</span>
                            <span class="k">if</span> <span class="n">part_label</span> <span class="ow">in</span> <span class="n">dic</span><span class="p">:</span>
                                <span class="c1"># insert the component name for ssp but not for comp_def</span>
                                <span class="c1"># because there should only be one component in generated comp_def markdown</span>
                                <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">!=</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">comp_name</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_insert_comp_info</span><span class="p">(</span><span class="n">part_label</span><span class="p">,</span> <span class="n">dic</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
                                <span class="n">wrote_label_content</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">wrote_label_content</span><span class="p">:</span>
                            <span class="n">level</span> <span class="o">=</span> <span class="mi">3</span> <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">COMPONENT</span> <span class="k">else</span> <span class="mi">4</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_insert_status</span><span class="p">(</span><span class="n">ImplementationStatus</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">const</span><span class="o">.</span><span class="n">STATUS_PLANNED</span><span class="p">),</span> <span class="n">level</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paragraph</span><span class="p">()</span>
                        <span class="n">did_write_part</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># if we loaded nothing for this control yet then it must need a fresh prompt for the control statement</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">comp_dict</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">did_write_part</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">const</span><span class="o">.</span><span class="n">SSP_ADD_IMPLEMENTATION_FOR_CONTROL_TEXT</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> --&gt;&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ContextPurpose</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">,</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">SSP</span><span class="p">]:</span>
                <span class="n">status</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_status_from_props</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_insert_status</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">did_write_part</span><span class="p">:</span>
            <span class="n">part_label</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">for</span> <span class="n">comp_name</span><span class="p">,</span> <span class="n">dic</span> <span class="ow">in</span> <span class="n">comp_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">part_label</span> <span class="ow">in</span> <span class="n">dic</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">comp_name</span> <span class="o">!=</span> <span class="n">const</span><span class="o">.</span><span class="n">SSP_MAIN_COMP_NAME</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">comp_name</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_insert_comp_info</span><span class="p">(</span><span class="n">part_label</span><span class="p">,</span> <span class="n">dic</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_hr</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_dump_subpart_infos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">part</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">part</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span> <span class="k">else</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;prose&#39;</span> <span class="ow">in</span> <span class="n">part</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paraline</span><span class="p">(</span><span class="n">part</span><span class="p">[</span><span class="s1">&#39;prose&#39;</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">subpart</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;parts&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dump_subpart_infos</span><span class="p">(</span><span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">subpart</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_dump_subparts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">part</span><span class="p">:</span> <span class="n">Part</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span>
        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span> <span class="k">else</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">prose</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paraline</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">prose</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">subpart</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dump_subparts</span><span class="p">(</span><span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">subpart</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_dump_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">part</span><span class="p">:</span> <span class="n">Part</span><span class="p">,</span> <span class="n">added_sections</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span> <span class="k">else</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span>
        <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">prefix</span> <span class="k">else</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">prose</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paraline</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">prose</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">subpart</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dump_subparts</span><span class="p">(</span><span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">subpart</span><span class="p">)</span>
        <span class="n">added_sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_dump_section_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">part</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">added_sections</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">part_prose</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;prose&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">part_subparts</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;parts&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">part</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span> <span class="k">else</span> <span class="n">name</span>
        <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">prefix</span> <span class="k">else</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">part_prose</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paraline</span><span class="p">(</span><span class="n">part_prose</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">subpart</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">part_subparts</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_dump_subpart_infos</span><span class="p">(</span><span class="n">level</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">subpart</span><span class="p">)</span>
        <span class="n">added_sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_additional_content</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span>
        <span class="n">profile</span><span class="p">:</span> <span class="n">prof</span><span class="o">.</span><span class="n">Profile</span><span class="p">,</span>
        <span class="n">header</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">found_alters</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">prof</span><span class="o">.</span><span class="n">Alter</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="c1"># get part and subpart info from adds of the profile</span>
        <span class="n">part_infos</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_all_add_info</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">profile</span><span class="p">)</span>
        <span class="n">has_content</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">part_infos</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">const</span><span class="o">.</span><span class="n">EDITABLE_CONTENT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span><span class="s1">&#39;&lt;!-- Make additions and edits below --&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span>
            <span class="s1">&#39;&lt;!-- The above represents the contents of the control as received by the profile, prior to additions. --&gt;&#39;</span>  <span class="c1"># noqa E501</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span>
            <span class="s1">&#39;&lt;!-- If the profile makes additions to the control, they will appear below. --&gt;&#39;</span>  <span class="c1"># noqa E501</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span>
            <span class="s1">&#39;&lt;!-- The above markdown may not be edited but you may edit the content below, and/or introduce new additions to be made by the profile. --&gt;&#39;</span>  <span class="c1"># noqa E501</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span>
            <span class="s1">&#39;&lt;!-- If there is a yaml header at the top, parameter values may be edited. Use --set-parameters to incorporate the changes during assembly. --&gt;&#39;</span>  <span class="c1"># noqa E501</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span>
            <span class="s1">&#39;&lt;!-- The content here will then replace what is in the profile for this control, after running profile-assemble. --&gt;&#39;</span>  <span class="c1"># noqa E501</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">has_content</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span>
                <span class="s1">&#39;&lt;!-- The added parts in the profile for this control are below.  You may edit them and/or add new ones. --&gt;&#39;</span>  <span class="c1"># noqa E501</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span>
                <span class="s1">&#39;&lt;!-- The current profile has no added parts for this control, but you may add new ones here. --&gt;&#39;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span>
            <span class="s1">&#39;&lt;!-- Each addition must have a heading either of the form ## Control my_addition_name --&gt;&#39;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span><span class="s1">&#39;&lt;!-- or ## Part a. (where the a. refers to one of the control statement labels.) --&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span><span class="s1">&#39;&lt;!-- &quot;## Control&quot; parts are new parts added after the statement part. --&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span>
            <span class="s1">&#39;&lt;!-- &quot;## Part&quot; parts are new parts added into the top-level statement part with that label. --&gt;&#39;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span><span class="s1">&#39;&lt;!-- Subparts may be added with nested hash levels of the form ### My Subpart Name --&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span><span class="s1">&#39;&lt;!-- underneath the parent ## Control or ## Part being added --&gt;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span>
            <span class="s1">&#39;&lt;!-- See https://ibm.github.io/compliance-trestle/tutorials/ssp_profile_catalog_authoring/ssp_profile_catalog_authoring for guidance. --&gt;&#39;</span>  <span class="c1"># noqa E501</span>
        <span class="p">)</span>
        <span class="c1"># next is to make mdformat happy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">_add_line_raw</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="n">added_sections</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">control_part_id_map</span> <span class="o">=</span> <span class="n">part_id_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">statement_id</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_statement_id</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>

        <span class="c1"># if the file already has markdown content, read its alters</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_ADD_PROPS_TAG</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
                <span class="n">header</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_ADD_PROPS_TAG</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">alter</span> <span class="ow">in</span> <span class="n">found_alters</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">add</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">alter</span><span class="o">.</span><span class="n">adds</span><span class="p">):</span>
                    <span class="c1"># by_id could refer to statement (Control) or part (Part)</span>
                    <span class="k">if</span> <span class="n">add</span><span class="o">.</span><span class="n">by_id</span><span class="p">:</span>
                        <span class="c1"># is this a part that goes after the control statement</span>
                        <span class="k">if</span> <span class="n">add</span><span class="o">.</span><span class="n">by_id</span> <span class="o">==</span> <span class="n">statement_id</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">parts</span><span class="p">):</span>
                                <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">prose</span> <span class="ow">or</span> <span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">_dump_section</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">part</span><span class="p">,</span> <span class="n">added_sections</span><span class="p">,</span> <span class="s1">&#39;Control&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="c1"># or is it a sub-part of a statement part</span>
                            <span class="n">part_label</span> <span class="o">=</span> <span class="n">control_part_id_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">by_id</span><span class="p">,</span> <span class="n">add</span><span class="o">.</span><span class="n">by_id</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">add</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Part </span><span class="si">{</span><span class="n">part_label</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                                <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">parts</span><span class="p">):</span>
                                    <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">prose</span> <span class="ow">or</span> <span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                                        <span class="n">name</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">name</span>
                                        <span class="c1"># need special handling for statement parts because their name is &#39;item&#39;</span>
                                        <span class="c1"># get the short name as last piece of the part id after the &#39;.&#39;</span>
                                        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="n">const</span><span class="o">.</span><span class="n">ITEM</span><span class="p">:</span>
                                            <span class="n">name</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                                        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span> <span class="k">else</span> <span class="n">name</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
                                        <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">prose</span><span class="p">:</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_paraline</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">prose</span><span class="p">)</span>
                                        <span class="k">for</span> <span class="n">subpart</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">):</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">_dump_subparts</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">subpart</span><span class="p">)</span>
                                        <span class="n">added_sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># if not by_id just add at end of control&#39;s parts</span>
                        <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">as_list</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">parts</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">prose</span> <span class="ow">or</span> <span class="n">part</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_dump_section</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">part</span><span class="p">,</span> <span class="n">added_sections</span><span class="p">,</span> <span class="s1">&#39;Control&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">add</span><span class="o">.</span><span class="n">props</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_ADD_PROPS_TAG</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
                            <span class="n">header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_ADD_PROPS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="n">by_id</span> <span class="o">=</span> <span class="n">add</span><span class="o">.</span><span class="n">by_id</span>
                        <span class="n">part_info</span> <span class="o">=</span> <span class="n">PartInfo</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">prose</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="n">add</span><span class="o">.</span><span class="n">props</span><span class="p">,</span> <span class="n">smt_part</span><span class="o">=</span><span class="n">by_id</span><span class="p">)</span>
                        <span class="n">_</span><span class="p">,</span> <span class="n">prop_list</span> <span class="o">=</span> <span class="n">part_info</span><span class="o">.</span><span class="n">to_dicts</span><span class="p">(</span><span class="n">part_id_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="p">{}))</span>
                        <span class="n">header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_ADD_PROPS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">prop_list</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># md does not already exist so fill in directly</span>
            <span class="n">in_part</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">for</span> <span class="n">part_info</span> <span class="ow">in</span> <span class="n">part_infos</span><span class="p">:</span>
                <span class="n">part</span><span class="p">,</span> <span class="n">prop_list</span> <span class="o">=</span> <span class="n">part_info</span><span class="o">.</span><span class="n">to_dicts</span><span class="p">(</span><span class="n">part_id_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="p">{}))</span>
                <span class="c1"># is this part of a statement part</span>
                <span class="k">if</span> <span class="n">part_info</span><span class="o">.</span><span class="n">smt_part</span> <span class="ow">and</span> <span class="n">part_info</span><span class="o">.</span><span class="n">prose</span> <span class="ow">and</span> <span class="n">part_info</span><span class="o">.</span><span class="n">smt_part</span> <span class="ow">in</span> <span class="n">control_part_id_map</span><span class="p">:</span>
                    <span class="c1"># avoid outputting ## Part again if in same part</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">part_info</span><span class="o">.</span><span class="n">smt_part</span> <span class="o">==</span> <span class="n">in_part</span><span class="p">:</span>
                        <span class="n">in_part</span> <span class="o">=</span> <span class="n">part_info</span><span class="o">.</span><span class="n">smt_part</span>
                        <span class="n">part_label</span> <span class="o">=</span> <span class="n">control_part_id_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">part_info</span><span class="o">.</span><span class="n">smt_part</span><span class="p">,</span> <span class="n">part_info</span><span class="o">.</span><span class="n">smt_part</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Part </span><span class="si">{</span><span class="n">part_label</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_dump_section_info</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">part</span><span class="p">,</span> <span class="n">added_sections</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="c1"># is it a control part</span>
                <span class="k">elif</span> <span class="n">part_info</span><span class="o">.</span><span class="n">prose</span> <span class="ow">or</span> <span class="n">part_info</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                    <span class="n">in_part</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_dump_section_info</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">part</span><span class="p">,</span> <span class="n">added_sections</span><span class="p">,</span> <span class="s1">&#39;Control&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">prop_list</span><span class="p">:</span>
                    <span class="n">in_part</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                    <span class="k">if</span> <span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_ADD_PROPS_TAG</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
                        <span class="n">header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_ADD_PROPS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">header</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_ADD_PROPS_TAG</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">prop_list</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">added_sections</span>

    <span class="k">def</span> <span class="nf">_prompt_required_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">required_sections</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">added_sections</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add prompts for any required sections that haven&#39;t already been written out.&quot;&quot;&quot;</span>
        <span class="n">missing_sections</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">required_sections</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">added_sections</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">missing_sections</span><span class="p">):</span>
            <span class="n">section_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">section</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_header</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Control </span><span class="si">{</span><span class="n">section_title</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">new_line</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">const</span><span class="o">.</span><span class="n">PROFILE_ADD_REQUIRED_SECTION_FOR_CONTROL_TEXT</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">section_title</span><span class="si">}</span><span class="s1"> --&gt;&#39;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_merge_headers</span><span class="p">(</span><span class="n">memory_header</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">md_header</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
                       <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">merged_header</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">md_header</span><span class="p">)</span>
        <span class="n">ControlInterface</span><span class="o">.</span><span class="n">merge_dicts_deep</span><span class="p">(</span><span class="n">merged_header</span><span class="p">,</span> <span class="n">memory_header</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">merged_header</span>

    <span class="k">def</span> <span class="nf">write_control_for_editing</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">,</span>
        <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span>
        <span class="n">dest_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
        <span class="n">group_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">found_alters</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">prof</span><span class="o">.</span><span class="n">Alter</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write out the control in markdown format into the specified directory.</span>

<span class="sd">        Args:</span>
<span class="sd">            context: The context of the control usage</span>
<span class="sd">            control: The control to write as markdown</span>
<span class="sd">            dest_path: Path to the directory where the control will be written</span>
<span class="sd">            group_title: Title of the group containing the control</span>
<span class="sd">            part_id_map: Mapping of part_id to label</span>
<span class="sd">            found_alters: List of alters read from the markdown file - if it exists</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Notes:</span>
<span class="sd">            The filename is constructed from the control&#39;s id and created in the dest_path.</span>
<span class="sd">            If a yaml header is present in the file, new values in provided header will not replace those in the</span>
<span class="sd">            markdown header unless overwrite_header_values is true.  If it is true then overwrite any existing values,</span>
<span class="sd">            but in all cases new items from the provided header will be added to the markdown header.</span>
<span class="sd">            If the markdown file already exists, its current header and prose are read.</span>
<span class="sd">            Controls are checked if they are marked withdrawn, and if so they are not written out.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">is_withdrawn</span><span class="p">(</span><span class="n">control</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not writing out control </span><span class="si">{</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> since it is marked Withdrawn.&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">control_file</span> <span class="o">=</span> <span class="n">dest_path</span> <span class="o">/</span> <span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span> <span class="o">+</span> <span class="n">const</span><span class="o">.</span><span class="n">MARKDOWN_FILE_EXT</span><span class="p">)</span>
        <span class="c1"># read the existing markdown header and content if it exists</span>
        <span class="n">md_header</span><span class="p">,</span> <span class="n">comp_dict</span> <span class="o">=</span> <span class="n">ControlReader</span><span class="o">.</span><span class="n">read_control_info_from_md</span><span class="p">(</span><span class="n">control_file</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="c1"># replace the memory comp_dict with the md one if control exists</span>
        <span class="k">if</span> <span class="n">comp_dict</span><span class="p">:</span>
            <span class="n">context</span><span class="o">.</span><span class="n">comp_dict</span> <span class="o">=</span> <span class="n">comp_dict</span>

        <span class="n">header_comment_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_ADD_PROPS_TAG</span><span class="p">:</span> <span class="n">const</span><span class="o">.</span><span class="n">YAML_PROPS_COMMENT</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">PROFILE</span><span class="p">:</span>
                <span class="n">header_comment_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">YAML_PROFILE_VALUES_COMMENT</span>
            <span class="k">elif</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">SSP</span><span class="p">:</span>
                <span class="n">header_comment_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">YAML_SSP_VALUES_COMMENT</span>
                <span class="n">header_comment_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">COMP_DEF_RULES_PARAM_VALS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">YAML_RULE_PARAM_VALUES_SSP_COMMENT</span>
            <span class="k">elif</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span>
                <span class="n">header_comment_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">COMP_DEF_RULES_PARAM_VALS_TAG</span>
                                    <span class="p">]</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">YAML_RULE_PARAM_VALUES_COMPONENT_COMMENT</span>

        <span class="c1"># begin adding info to the md file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span> <span class="o">=</span> <span class="n">MDWriter</span><span class="p">(</span><span class="n">control_file</span><span class="p">,</span> <span class="n">header_comment_dict</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">sections_dict</span>

        <span class="n">context</span><span class="o">.</span><span class="n">merged_header</span> <span class="o">=</span> <span class="n">ControlWriter</span><span class="o">.</span><span class="n">_merge_headers</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">,</span> <span class="n">md_header</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="c1"># if the control has an explicitly defined sort-id and there is none in the yaml_header, then insert it</span>
        <span class="c1"># in the yaml header and allow overwrite_header_values to control whether it overwrites an existing one</span>
        <span class="c1"># in the markdown header</span>
        <span class="n">context</span><span class="o">.</span><span class="n">cli_yaml_header</span> <span class="o">=</span> <span class="n">as_dict</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">cli_yaml_header</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">!=</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">PROFILE</span><span class="p">:</span>
            <span class="n">ControlInterface</span><span class="o">.</span><span class="n">merge_dicts_deep</span><span class="p">(</span>
                <span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">cli_yaml_header</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">overwrite_header_values</span>
            <span class="p">)</span>
        <span class="c1"># the global contents are special and get overwritten on generate</span>
        <span class="n">set_or_pop</span><span class="p">(</span>
            <span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">,</span>
            <span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_GLOBAL_TAG</span><span class="p">,</span>
            <span class="n">context</span><span class="o">.</span><span class="n">cli_yaml_header</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_GLOBAL_TAG</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">sort_id</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_sort_id</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sort_id</span><span class="p">:</span>
            <span class="n">deep_set</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">,</span> <span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_GLOBAL_TAG</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">SORT_ID</span><span class="p">],</span> <span class="n">sort_id</span><span class="p">)</span>

        <span class="c1"># merge any provided sections with sections in the header, with priority to the one from context (e.g. CLI)</span>
        <span class="n">header_sections_dict</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">SECTIONS_TAG</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">merged_sections_dict</span> <span class="o">=</span> <span class="n">merge_dicts</span><span class="p">(</span><span class="n">header_sections_dict</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">sections_dict</span><span class="p">)</span>
        <span class="n">set_or_pop</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">SECTIONS_TAG</span><span class="p">,</span> <span class="n">merged_sections_dict</span><span class="p">)</span>

        <span class="c1"># now begin filling in content from the control in memory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_control_statement</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">group_title</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_add_control_objective</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>

        <span class="c1"># add allowed sections to the markdown</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_sections</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span><span class="p">)</span>

        <span class="c1"># prompt responses for imp reqs using special format if comp_def mode</span>
        <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">prompt_responses</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_implementation_response_prompts</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">comp_dict</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

        <span class="c1"># for profile generate</span>
        <span class="c1"># add sections corresponding to added parts in the profile</span>
        <span class="n">added_sections</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">PROFILE</span><span class="p">:</span>
            <span class="n">added_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_additional_content</span><span class="p">(</span>
                <span class="n">control</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">,</span> <span class="n">found_alters</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_add_yaml_header</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">required_sections</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_prompt_required_sections</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">required_sections</span><span class="p">,</span> <span class="n">added_sections</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">write_out</span><span class="p">()</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">







<h5 id="trestle.core.control_writer.ControlWriter-methods">Methods<a href="#trestle.core.control_writer.ControlWriter-methods" class="headerlink" title="Permanent link"></a></h5>

  <div class="doc doc-object doc-method">



<h6 id="trestle.core.control_writer.ControlWriter.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#trestle.core.control_writer.ControlWriter.__init__" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Initialize the class.</p>

        <details class="quote">
          <summary>Source code in <code>trestle/core/control_writer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the class.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MDWriter</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h6 id="trestle.core.control_writer.ControlWriter.write_control_for_editing" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_control_for_editing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">control</span><span class="p">,</span> <span class="n">dest_path</span><span class="p">,</span> <span class="n">group_title</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">,</span> <span class="n">found_alters</span><span class="p">)</span></code>


<a href="#trestle.core.control_writer.ControlWriter.write_control_for_editing" class="headerlink" title="Permanent link"></a></h6>

    <div class="doc doc-contents ">

      <p>Write out the control in markdown format into the specified directory.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>context</code></td>
        <td><code>ControlContext</code></td>
        <td><p>The context of the control usage</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>control</code></td>
        <td><code>Control</code></td>
        <td><p>The control to write as markdown</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>dest_path</code></td>
        <td><code>Path</code></td>
        <td><p>Path to the directory where the control will be written</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>group_title</code></td>
        <td><code>str</code></td>
        <td><p>Title of the group containing the control</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>part_id_map</code></td>
        <td><code>Dict[str, str]</code></td>
        <td><p>Mapping of part_id to label</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>found_alters</code></td>
        <td><code>List[trestle.oscal.profile.Alter]</code></td>
        <td><p>List of alters read from the markdown file - if it exists</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition notes">
<p class="admonition-title">Notes</p>
<p>The filename is constructed from the control's id and created in the dest_path.
If a yaml header is present in the file, new values in provided header will not replace those in the
markdown header unless overwrite_header_values is true.  If it is true then overwrite any existing values,
but in all cases new items from the provided header will be added to the markdown header.
If the markdown file already exists, its current header and prose are read.
Controls are checked if they are marked withdrawn, and if so they are not written out.</p>
</div>

        <details class="quote">
          <summary>Source code in <code>trestle/core/control_writer.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">write_control_for_editing</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">ControlContext</span><span class="p">,</span>
    <span class="n">control</span><span class="p">:</span> <span class="n">cat</span><span class="o">.</span><span class="n">Control</span><span class="p">,</span>
    <span class="n">dest_path</span><span class="p">:</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span>
    <span class="n">group_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">part_id_map</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">found_alters</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">prof</span><span class="o">.</span><span class="n">Alter</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write out the control in markdown format into the specified directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        context: The context of the control usage</span>
<span class="sd">        control: The control to write as markdown</span>
<span class="sd">        dest_path: Path to the directory where the control will be written</span>
<span class="sd">        group_title: Title of the group containing the control</span>
<span class="sd">        part_id_map: Mapping of part_id to label</span>
<span class="sd">        found_alters: List of alters read from the markdown file - if it exists</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    Notes:</span>
<span class="sd">        The filename is constructed from the control&#39;s id and created in the dest_path.</span>
<span class="sd">        If a yaml header is present in the file, new values in provided header will not replace those in the</span>
<span class="sd">        markdown header unless overwrite_header_values is true.  If it is true then overwrite any existing values,</span>
<span class="sd">        but in all cases new items from the provided header will be added to the markdown header.</span>
<span class="sd">        If the markdown file already exists, its current header and prose are read.</span>
<span class="sd">        Controls are checked if they are marked withdrawn, and if so they are not written out.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">is_withdrawn</span><span class="p">(</span><span class="n">control</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Not writing out control </span><span class="si">{</span><span class="n">control</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> since it is marked Withdrawn.&#39;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">control_file</span> <span class="o">=</span> <span class="n">dest_path</span> <span class="o">/</span> <span class="p">(</span><span class="n">control</span><span class="o">.</span><span class="n">id</span> <span class="o">+</span> <span class="n">const</span><span class="o">.</span><span class="n">MARKDOWN_FILE_EXT</span><span class="p">)</span>
    <span class="c1"># read the existing markdown header and content if it exists</span>
    <span class="n">md_header</span><span class="p">,</span> <span class="n">comp_dict</span> <span class="o">=</span> <span class="n">ControlReader</span><span class="o">.</span><span class="n">read_control_info_from_md</span><span class="p">(</span><span class="n">control_file</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
    <span class="c1"># replace the memory comp_dict with the md one if control exists</span>
    <span class="k">if</span> <span class="n">comp_dict</span><span class="p">:</span>
        <span class="n">context</span><span class="o">.</span><span class="n">comp_dict</span> <span class="o">=</span> <span class="n">comp_dict</span>

    <span class="n">header_comment_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_ADD_PROPS_TAG</span><span class="p">:</span> <span class="n">const</span><span class="o">.</span><span class="n">YAML_PROPS_COMMENT</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">PROFILE</span><span class="p">:</span>
            <span class="n">header_comment_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">YAML_PROFILE_VALUES_COMMENT</span>
        <span class="k">elif</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">SSP</span><span class="p">:</span>
            <span class="n">header_comment_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">SET_PARAMS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">YAML_SSP_VALUES_COMMENT</span>
            <span class="n">header_comment_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">COMP_DEF_RULES_PARAM_VALS_TAG</span><span class="p">]</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">YAML_RULE_PARAM_VALUES_SSP_COMMENT</span>
        <span class="k">elif</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">COMPONENT</span><span class="p">:</span>
            <span class="n">header_comment_dict</span><span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">COMP_DEF_RULES_PARAM_VALS_TAG</span>
                                <span class="p">]</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">YAML_RULE_PARAM_VALUES_COMPONENT_COMMENT</span>

    <span class="c1"># begin adding info to the md file</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span> <span class="o">=</span> <span class="n">MDWriter</span><span class="p">(</span><span class="n">control_file</span><span class="p">,</span> <span class="n">header_comment_dict</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_sections_dict</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">sections_dict</span>

    <span class="n">context</span><span class="o">.</span><span class="n">merged_header</span> <span class="o">=</span> <span class="n">ControlWriter</span><span class="o">.</span><span class="n">_merge_headers</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">,</span> <span class="n">md_header</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
    <span class="c1"># if the control has an explicitly defined sort-id and there is none in the yaml_header, then insert it</span>
    <span class="c1"># in the yaml header and allow overwrite_header_values to control whether it overwrites an existing one</span>
    <span class="c1"># in the markdown header</span>
    <span class="n">context</span><span class="o">.</span><span class="n">cli_yaml_header</span> <span class="o">=</span> <span class="n">as_dict</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">cli_yaml_header</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">!=</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">PROFILE</span><span class="p">:</span>
        <span class="n">ControlInterface</span><span class="o">.</span><span class="n">merge_dicts_deep</span><span class="p">(</span>
            <span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">cli_yaml_header</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">overwrite_header_values</span>
        <span class="p">)</span>
    <span class="c1"># the global contents are special and get overwritten on generate</span>
    <span class="n">set_or_pop</span><span class="p">(</span>
        <span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">,</span>
        <span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_GLOBAL_TAG</span><span class="p">,</span>
        <span class="n">context</span><span class="o">.</span><span class="n">cli_yaml_header</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_GLOBAL_TAG</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sort_id</span> <span class="o">=</span> <span class="n">ControlInterface</span><span class="o">.</span><span class="n">get_sort_id</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sort_id</span><span class="p">:</span>
        <span class="n">deep_set</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">,</span> <span class="p">[</span><span class="n">const</span><span class="o">.</span><span class="n">TRESTLE_GLOBAL_TAG</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">SORT_ID</span><span class="p">],</span> <span class="n">sort_id</span><span class="p">)</span>

    <span class="c1"># merge any provided sections with sections in the header, with priority to the one from context (e.g. CLI)</span>
    <span class="n">header_sections_dict</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">const</span><span class="o">.</span><span class="n">SECTIONS_TAG</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">merged_sections_dict</span> <span class="o">=</span> <span class="n">merge_dicts</span><span class="p">(</span><span class="n">header_sections_dict</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">sections_dict</span><span class="p">)</span>
    <span class="n">set_or_pop</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">,</span> <span class="n">const</span><span class="o">.</span><span class="n">SECTIONS_TAG</span><span class="p">,</span> <span class="n">merged_sections_dict</span><span class="p">)</span>

    <span class="c1"># now begin filling in content from the control in memory</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_add_control_statement</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">group_title</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_add_control_objective</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>

    <span class="c1"># add allowed sections to the markdown</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_add_sections</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">allowed_sections</span><span class="p">)</span>

    <span class="c1"># prompt responses for imp reqs using special format if comp_def mode</span>
    <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">prompt_responses</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_implementation_response_prompts</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">comp_dict</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

    <span class="c1"># for profile generate</span>
    <span class="c1"># add sections corresponding to added parts in the profile</span>
    <span class="n">added_sections</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">purpose</span> <span class="o">==</span> <span class="n">ContextPurpose</span><span class="o">.</span><span class="n">PROFILE</span><span class="p">:</span>
        <span class="n">added_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_additional_content</span><span class="p">(</span>
            <span class="n">control</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">profile</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">,</span> <span class="n">part_id_map</span><span class="p">,</span> <span class="n">found_alters</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_add_yaml_header</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">merged_header</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">required_sections</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prompt_required_sections</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">required_sections</span><span class="p">,</span> <span class="n">added_sections</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_md_file</span><span class="o">.</span><span class="n">write_out</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>







  </div>

    </div>

  </div>

<p>handler: python</p>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c2be25ad.min.js"></script>
      
    
  </body>
</html>